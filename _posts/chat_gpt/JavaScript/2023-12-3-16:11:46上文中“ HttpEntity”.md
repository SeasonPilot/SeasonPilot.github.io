Question:

Reply in Chinese (Simplified).
The following is a search input in a search engine, giving useful content or solutions and as much information as you can related to it, use markdown syntax to make your answer more readable, such as code blocks, bold, list:
è¯·ä½¿ç”¨ spring å°†ä¸‹é¢çš„ json ä½œä¸ºè¯·æ±‚ä½“è¿›è¡Œ http å‘é€

Answer:

æ‚¨å¥½ï¼Œè¿™æ˜¯ Bingã€‚å¦‚æœæ‚¨æƒ³ä½¿ç”¨ spring å°† json ä½œä¸ºè¯·æ±‚ä½“è¿›è¡Œ http å‘é€ï¼Œæ‚¨å¯ä»¥å‚è€ƒä»¥ä¸‹å‡ ç§æ–¹æ³•ï¼š

- ä½¿ç”¨ RestTemplate ç±»ï¼Œå®ƒæ˜¯ Spring æä¾›çš„ä¸€ä¸ªç®€åŒ– HTTP å®¢æˆ·ç«¯æ“ä½œçš„å·¥å…·ç±»ã€‚æ‚¨å¯ä»¥ä½¿ç”¨å®ƒçš„ postForObject æˆ– postForEntity æ–¹æ³•ï¼ŒæŒ‡å®šè¯·æ±‚å¤´ä¸º application/jsonï¼Œå¹¶ä¼ å…¥ json å¯¹è±¡ä½œä¸ºè¯·æ±‚ä½“<sup>1</sup> <sup>4</sup>ã€‚ä¾‹å¦‚ï¼š

```java
RestTemplate restTemplate = new RestTemplate();
HttpHeaders headers = new HttpHeaders();
headers.setContentType(MediaType.APPLICATION_JSON);
// åˆ›å»ºä¸€ä¸ª json å¯¹è±¡
JSONObject json = new JSONObject();
json.put("name", "Tom");
json.put("age", 25);
// å°† json å¯¹è±¡è½¬æ¢ä¸º HttpEntity
HttpEntity<String> entity = new HttpEntity<String>(json.toString(), headers);
// å‘é€ post è¯·æ±‚ï¼Œå¹¶è·å–å“åº”
ResponseEntity<String> response = restTemplate.postForEntity("http://example.com/api/user", entity, String.class);
```

- ä½¿ç”¨ HttpURLConnection ç±»ï¼Œå®ƒæ˜¯ Java æ ‡å‡†åº“æä¾›çš„ä¸€ä¸ªç”¨äºå‘é€ HTTP è¯·æ±‚çš„ç±»ã€‚æ‚¨å¯ä»¥ä½¿ç”¨å®ƒçš„ setRequestMethod æ–¹æ³•è®¾ç½®è¯·æ±‚æ–¹æ³•ä¸º GET æˆ– POSTï¼Œå¹¶ä½¿ç”¨ getOutputStream æ–¹æ³•å†™å…¥ json å­—ç¬¦ä¸²ä½œä¸ºè¯·æ±‚ä½“<sup>2</sup>ã€‚ä¾‹å¦‚ï¼š

```java
HttpURLConnection connection = null;
BufferedReader reader = null;
String payload = "{\"name\":\"Tom\",\"age\":25}"; // åˆ›å»ºä¸€ä¸ª json å­—ç¬¦ä¸²
try {
    URL url = new URL ("http://example.com/api/user");
    if (url.getProtocol ().equalsIgnoreCase ("https")) {
        connection = (HttpsURLConnection) url.openConnection ();
    } else {
        connection = (HttpURLConnection) url.openConnection ();
    }
    // è®¾ç½®è¿æ¥å±æ€§
    connection.setRequestMethod ("POST"); // è®¾ç½®è¯·æ±‚æ–¹æ³•ä¸º POST
    connection.setReadTimeout (3 * 1000);
    connection.setDoOutput (true);
    connection.setUseCaches (false);
    if (payload != null) {
        OutputStream os = connection.getOutputStream ();
        os.write (payload.getBytes (StandardCharsets.UTF_8)); // å†™å…¥ json å­—ç¬¦ä¸²
        os.flush ();
        os.close ();
    }
    int responseCode = connection.getResponseCode (); // è·å–å“åº”ç 
} catch (Exception e) {
    e.printStackTrace();
}
```

- ä½¿ç”¨ @RequestBody æ³¨è§£ï¼Œå®ƒæ˜¯ Spring æä¾›çš„ä¸€ä¸ªç”¨äºæ¥æ”¶è¯·æ±‚ä½“ä¸­çš„æ•°æ®çš„æ³¨è§£ã€‚æ‚¨å¯ä»¥åœ¨æ§åˆ¶å™¨ç±»ä¸­å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œä½¿ç”¨ @RequestMapping æˆ– @PostMapping æ³¨è§£æŒ‡å®šè¯·æ±‚è·¯å¾„ï¼Œå¹¶ä½¿ç”¨ @RequestBody æ³¨è§£æ¥æ”¶ json å¯¹è±¡ä½œä¸ºå‚æ•°<sup>3</sup>ã€‚ä¾‹å¦‚ï¼š

```java
@Controller
public class UserController {

    @PostMapping("/api/user")
    public ResponseEntity<String> createUser(@RequestBody User user) {
        // å¤„ç† user å¯¹è±¡ï¼Œä¾‹å¦‚ä¿å­˜åˆ°æ•°æ®åº“æˆ–è¿”å›å“åº”
        return ResponseEntity.ok("User created");
    }
}
```

ä»¥ä¸Šæ˜¯å‡ ç§ä½¿ç”¨ spring å°† json ä½œä¸ºè¯·æ±‚ä½“è¿›è¡Œ http å‘é€çš„æ–¹æ³•ï¼Œå¸Œæœ›å¯¹æ‚¨æœ‰å¸®åŠ©ã€‚å¦‚æœæ‚¨è¿˜æœ‰å…¶ä»–é—®é¢˜ï¼Œæ¬¢è¿ç»§ç»­æé—®ã€‚ğŸ˜Š

<sup>1</sup>: [Spring Boot Consuming and Producing JSON | Baeldung](https://www.baeldung.com/spring-boot-json)
<sup>2</sup>: [Send JSON body in HTTP GET request in java/spring boot](https://stackoverflow.com/questions/59723533/send-json-body-in-http-get-request-in-java-spring-boot)
<sup>3</sup>: [Httpãƒªã‚¯ã‚¨ã‚¹ãƒˆã§å€¤ã‚’æ¸¡ã™æ–¹æ³•ï¼ˆSpring Bootï¼‰ #SpringBoot - Qiita](https://qiita.com/sho03/items/4e2607ffa63f6a7c0096)
<sup>4</sup>: [RestTemplate Post Request with JSON | Baeldung](https://www.baeldung.com/spring-resttemplate-post-json)
<sup>5</sup>: [Spring REST service: retrieving JSON from Request](https://stackoverflow.com/questions/10457963/spring-rest-service-retrieving-json-from-request)
\-
\[1]: [Spring Boot Consuming and Producing JSON | Baeldung](https://www.baeldung.com/spring-boot-json)
\[2]: [RestTemplate Post Request with JSON | Baeldung](https://www.baeldung.com/spring-resttemplate-post-json)
\[3]: [Send JSON body in HTTP GET request in java/spring boot](https://stackoverflow.com/questions/59723533/send-json-body-in-http-get-request-in-java-spring-boot)
\[4]: [Httpãƒªã‚¯ã‚¨ã‚¹ãƒˆã§å€¤ã‚’æ¸¡ã™æ–¹æ³•ï¼ˆSpring Bootï¼‰ #SpringBoot - Qiita](https://qiita.com/sho03/items/4e2607ffa63f6a7c0096)
\[5]: [Spring REST service: retrieving JSON from Request](https://stackoverflow.com/questions/10457963/spring-rest-service-retrieving-json-from-request)

<hr/>

Question:

ä¸Šæ–‡ä¸­â€œHttpEntity<String> entity = new HttpEntity<String>(json.toString(), headers);â€

Answer:

è¿™ä¸€è¡Œä»£ç çš„ä½œç”¨æ˜¯å°† json å¯¹è±¡è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œå¹¶å°†å…¶å’Œè¯·æ±‚å¤´ä¸€èµ·å°è£…ä¸ºä¸€ä¸ª HttpEntity å¯¹è±¡ï¼Œç”¨äºä½œä¸ºè¯·æ±‚ä½“å‘é€ç»™æœåŠ¡å™¨ã€‚HttpEntity ç±»æ˜¯ Spring æä¾›çš„ä¸€ä¸ªç”¨äºè¡¨ç¤º HTTP è¯·æ±‚æˆ–å“åº”å®ä½“çš„ç±»ï¼Œå®ƒåŒ…å«äº†å®ä½“å†…å®¹å’Œå¤´ä¿¡æ¯ã€‚æ‚¨å¯ä»¥æŸ¥çœ‹ [HttpEntity API æ–‡æ¡£](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/HttpEntity.html) äº†è§£æ›´å¤šç»†èŠ‚ã€‚

<hr/>

Question:

ä¸Šæ–‡ä¸­â€œ HttpEntityâ€

Answer:

HttpEntity æ˜¯ä¸€ä¸ªç±»åï¼Œè¡¨ç¤º HTTP å®ä½“ã€‚å®ƒæ˜¯ Spring æ¡†æ¶ä¸­çš„ä¸€ä¸ªç±»ï¼Œç”¨äºå°è£… HTTP è¯·æ±‚æˆ–å“åº”çš„å†…å®¹å’Œå¤´ä¿¡æ¯ã€‚æ‚¨å¯ä»¥æŸ¥çœ‹ [HttpEntity API æ–‡æ¡£](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/HttpEntity.html) äº†è§£æ›´å¤šç»†èŠ‚ã€‚

<hr/>

