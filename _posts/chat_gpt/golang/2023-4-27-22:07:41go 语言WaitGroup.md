---
layout: post
categories: golang
---
Question:

Reply in Chinese (Simplified).
The following is a search input in a search engine, giving useful content or solutions and as much information as you can related to it, use markdown syntax to make your answer more readable, such as code blocks, bold, list:
go è¯­è¨€WaitGroup

Answer:

ä½ å¥½ï¼Œè¿™æ˜¯å¿…åº”ã€‚æˆ‘å¯ä»¥ç”¨ä¸­æ–‡ï¼ˆç®€ä½“ï¼‰å›å¤ä½ ã€‚ğŸ˜Š

go è¯­è¨€WaitGroup æ˜¯ä¸€ä¸ªç»“æ„ä½“ï¼Œå®ƒå¯ä»¥ç”¨æ¥åŒæ­¥å¤šä¸ªåç¨‹çš„æ‰§è¡Œã€‚å®ƒæœ‰ä¸‰ä¸ªæ–¹æ³•ï¼šAddï¼ŒDone å’Œ Waitã€‚<sup>1</sup> <sup>2</sup> <sup>3</sup>

- Add æ–¹æ³•å¯ä»¥ç»™å†…éƒ¨è®¡æ•°å™¨å¢åŠ æˆ–å‡å°‘ä¸€ä¸ªå€¼ï¼Œè¡¨ç¤ºæœ‰å¤šå°‘ä¸ªåç¨‹éœ€è¦ç­‰å¾…ã€‚
- Done æ–¹æ³•å¯ä»¥è®©å†…éƒ¨è®¡æ•°å™¨å‡ä¸€ï¼Œè¡¨ç¤ºä¸€ä¸ªåç¨‹å·²ç»å®Œæˆã€‚
- Wait æ–¹æ³•å¯ä»¥é˜»å¡å½“å‰åç¨‹ï¼Œç›´åˆ°å†…éƒ¨è®¡æ•°å™¨ä¸ºé›¶ï¼Œè¡¨ç¤ºæ‰€æœ‰åç¨‹éƒ½å·²ç»å®Œæˆã€‚

ä½¿ç”¨ WaitGroup çš„æ—¶å€™ï¼Œéœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š

- ä¸è¦å¤åˆ¶ WaitGroupï¼Œå¦åˆ™ä¼šå¯¼è‡´è®¡æ•°å™¨ä¸å‡†ç¡®ã€‚<sup>4</sup>
- ä¸è¦åœ¨ WaitGroup æœªå½’é›¶ä¹‹å‰é‡å¤ä½¿ç”¨ã€‚<sup>5</sup>
- ä¸è¦åœ¨ Wait æ–¹æ³•ä¹‹åè°ƒç”¨ Add æ–¹æ³•ï¼Œå¦åˆ™ä¼šå¼•å‘ panicã€‚<sup>5</sup>

ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨ WaitGroup çš„ç¤ºä¾‹ä»£ç ï¼š

```go
package main

import (
	"fmt"
	"sync"
)

func main() {
	var wg sync.WaitGroup // å®šä¹‰ä¸€ä¸ª WaitGroup
	wg.Add(3) // å¢åŠ è®¡æ•°å™¨ä¸º 3
	go func() {
		fmt.Println("Goroutine 1")
		wg.Done() // å‡å°‘è®¡æ•°å™¨
	}()
	go func() {
		fmt.Println("Goroutine 2")
		wg.Done() // å‡å°‘è®¡æ•°å™¨
	}()
	go func() {
		fmt.Println("Goroutine 3")
		wg.Done() // å‡å°‘è®¡æ•°å™¨
	}()
	wg.Wait() // ç­‰å¾…æ‰€æœ‰åç¨‹å®Œæˆ
	fmt.Println("All done")
}
```

\-
\[1]: [åŒæ­¥åç¨‹çš„å¿…å¤‡å·¥å…·: WaitGroup - çŸ¥ä¹ - çŸ¥ä¹ä¸“æ ](https://zhuanlan.zhihu.com/p/614900834)
\[2]: [Goè¯­è¨€ä¹‹syncåŒ… WaitGroupçš„ä½¿ç”¨ - ç‰›å¥” - åšå®¢å›­](https://www.cnblogs.com/niuben/p/14415196.html)
\[3]: [Goè¯­è¨€WaitGroup - è…¾è®¯äº‘å¼€å‘è€…ç¤¾åŒº-è…¾è®¯äº‘](https://cloud.tencent.com/developer/article/1969520)
\[4]: [æ·±å…¥ç†è§£ go sync.Waitgroup - æ˜é‡‘ - ç¨€åœŸæ˜é‡‘](https://juejin.cn/post/7181812988461252667)
\[5]: [Golang WaitGroup åŸç†æ·±åº¦å‰–æ - çŸ¥ä¹ - çŸ¥ä¹ä¸“æ ](https://zhuanlan.zhihu.com/p/344973865)

<hr/>

Question:

ä¸Šæ–‡ä¸­"ä¸è¦åœ¨ WaitGroup æœªå½’é›¶ä¹‹å‰é‡å¤ä½¿ç”¨"æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ

Answer:

è¿™å¥è¯çš„æ„æ€æ˜¯ï¼Œå¦‚æœä½ æƒ³ç”¨åŒä¸€ä¸ª WaitGroup æ¥åŒæ­¥ä¸åŒçš„åç¨‹ç»„ï¼Œä½ éœ€è¦ç­‰åˆ°ç¬¬ä¸€ç»„åç¨‹éƒ½å®Œæˆå¹¶ä¸” WaitGroup çš„è®¡æ•°å™¨å½’é›¶ä¹‹åï¼Œæ‰èƒ½å†æ¬¡è°ƒç”¨ Add æ–¹æ³•æ¥å¢åŠ ç¬¬äºŒç»„åç¨‹çš„æ•°é‡ã€‚<sup>6</sup> <sup>3</sup>

å¦‚æœä½ åœ¨ WaitGroup æœªå½’é›¶ä¹‹å‰å°±é‡å¤ä½¿ç”¨ï¼Œå¯èƒ½ä¼šå¯¼è‡´è®¡æ•°å™¨æ··ä¹±ï¼Œæˆ–è€… Wait æ–¹æ³•æå‰è¿”å›ï¼Œä»è€Œå¯¼è‡´åç¨‹çš„åŒæ­¥å‡ºé”™ã€‚<sup>4</sup> <sup>5</sup>

å¦‚æœä½ æƒ³åŒæ—¶åŒæ­¥å¤šä¸ªåç¨‹ç»„ï¼Œä½ å¯ä»¥ä½¿ç”¨å¤šä¸ª WaitGroupï¼Œæ¯ä¸ªåç¨‹ç»„å¯¹åº”ä¸€ä¸ª WaitGroupã€‚<sup>6</sup>

\-
\[1]: [åŒæ­¥åç¨‹çš„å¿…å¤‡å·¥å…·: WaitGroup - çŸ¥ä¹ - çŸ¥ä¹ä¸“æ ](https://zhuanlan.zhihu.com/p/614900834)
\[2]: [Go å¹¶å‘ä»»åŠ¡ç¼–æ’åˆ©å™¨ä¹‹ WaitGroup - çŸ¥ä¹ - çŸ¥ä¹ä¸“æ ](https://zhuanlan.zhihu.com/p/350580031)
\[3]: [æ·±å…¥ç†è§£ go sync.Waitgroup - æ˜é‡‘ - ç¨€åœŸæ˜é‡‘](https://juejin.cn/post/7181812988461252667)
\[4]: [Golang WaitGroup åŸç†æ·±åº¦å‰–æ - çŸ¥ä¹ - çŸ¥ä¹ä¸“æ ](https://zhuanlan.zhihu.com/p/344973865)
\[5]: [Goè¯­è¨€ä¹‹syncåŒ… WaitGroupçš„ä½¿ç”¨ - ç‰›å¥” - åšå®¢å›­](https://www.cnblogs.com/niuben/p/14415196.html)
\[6]: [Goè¯­è¨€ç­‰å¾…åç¨‹ç»“æŸ-Golang WaitGroupä½¿ç”¨-Goè¯­è¨€æ€ä¹ˆç­‰å¾…goroutineç»“æŸ-å—¨å®¢ç½‘](https://haicoder.net/golang/golang-waitgroup.html)

<hr/>

