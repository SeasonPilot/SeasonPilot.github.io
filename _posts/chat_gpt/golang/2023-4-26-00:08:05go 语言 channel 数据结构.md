---
layout: post
categories: golang
---
Question:

Reply in Chinese (Simplified).
The following is a search input in a search engine, giving useful content or solutions and as much information as you can related to it, use markdown syntax to make your answer more readable, such as code blocks, bold, list:
go è¯­è¨€ channel æ•°æ®ç»“æ„

Answer:

ä½ å¥½ï¼Œè¿™æ˜¯Bingã€‚æˆ‘å¯ä»¥ç”¨ä¸­æ–‡ï¼ˆç®€ä½“ï¼‰å›ç­”ä½ çš„é—®é¢˜ã€‚ğŸ˜Š

Goè¯­è¨€çš„channelæ˜¯ä¸€ç§æ ¸å¿ƒç±»å‹ï¼Œå¯ä»¥ç”¨æ¥åœ¨goroutineä¹‹é—´è¿›è¡Œæ•°æ®ä¼ é€’å’ŒåŒæ­¥<sup>2</sup>ã€‚channelæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå…ˆè¿›å…ˆå‡ºçš„é˜Ÿåˆ—ï¼Œå…·æœ‰çº¿ç¨‹å®‰å…¨æœºåˆ¶<sup>2</sup>ã€‚channelæœ‰ç±»å‹ï¼Œåªèƒ½å­˜æ”¾æŒ‡å®šç±»å‹çš„æ•°æ®<sup>2</sup>ã€‚

channelçš„å®šä¹‰æ ¼å¼å¦‚ä¸‹ï¼š

```go
ChannelType = ( "chan" | "chan" "<-" | "<-" "chan" ) ElementType
```

å…¶ä¸­ï¼Œ`chan`è¡¨ç¤ºåŒå‘çš„channelï¼Œå¯ä»¥å‘é€å’Œæ¥æ”¶æ•°æ®ï¼›`chan <-`è¡¨ç¤ºå•å‘çš„channelï¼Œåªèƒ½å‘é€æ•°æ®ï¼›`<- chan`è¡¨ç¤ºå•å‘çš„channelï¼Œåªèƒ½æ¥æ”¶æ•°æ®<sup>1</sup>ã€‚`ElementType`è¡¨ç¤ºchannelå­˜æ”¾çš„æ•°æ®ç±»å‹ã€‚

channelçš„åˆ›å»ºæ–¹å¼å¦‚ä¸‹ï¼š

```go
ch := make(chan int) // åˆ›å»ºä¸€ä¸ªæ— ç¼“å†²çš„åŒå‘æ•´å‹channel
ch := make(chan int, 100) // åˆ›å»ºä¸€ä¸ªæœ‰ç¼“å†²çš„åŒå‘æ•´å‹channelï¼Œç¼“å†²å¤§å°ä¸º100
ch := make(chan<- int) // åˆ›å»ºä¸€ä¸ªæ— ç¼“å†²çš„å•å‘æ•´å‹channelï¼Œåªèƒ½å‘é€æ•°æ®
ch := make(<-chan int) // åˆ›å»ºä¸€ä¸ªæ— ç¼“å†²çš„å•å‘æ•´å‹channelï¼Œåªèƒ½æ¥æ”¶æ•°æ®
```

channelçš„å‘é€å’Œæ¥æ”¶æ–¹å¼å¦‚ä¸‹ï¼š

```go
ch <- x // å‘channelå‘é€ä¸€ä¸ªå€¼x
x := <- ch // ä»channelæ¥æ”¶ä¸€ä¸ªå€¼å¹¶èµ‹ç»™å˜é‡x
<- ch // ä»channelæ¥æ”¶ä¸€ä¸ªå€¼å¹¶ä¸¢å¼ƒ
```

é»˜è®¤æƒ…å†µä¸‹ï¼Œå‘é€å’Œæ¥æ”¶ä¼šä¸€ç›´é˜»å¡ç€ï¼Œç›´åˆ°å¦ä¸€æ–¹å‡†å¤‡å¥½<sup>1</sup>ã€‚è¿™ç§æ–¹å¼å¯ä»¥ç”¨æ¥åœ¨goroutineä¸­è¿›è¡ŒåŒæ­¥ï¼Œè€Œä¸å¿…ä½¿ç”¨æ˜¾ç¤ºçš„é”æˆ–è€…æ¡ä»¶å˜é‡<sup>1</sup>ã€‚

å¦‚æœchannelæ˜¯æœ‰ç¼“å†²çš„ï¼Œé‚£ä¹ˆå‘é€æ“ä½œä¼šåœ¨ç¼“å†²åŒºæ»¡æ—¶é˜»å¡ï¼Œæ¥æ”¶æ“ä½œä¼šåœ¨ç¼“å†²åŒºç©ºæ—¶é˜»å¡<sup>1</sup>ã€‚

channelå¯ä»¥ä½¿ç”¨`range`è¯­å¥è¿›è¡Œéå†ï¼Œéå†æ—¶ä¼šä¸æ–­ä»channelæ¥æ”¶æ•°æ®ï¼Œç›´åˆ°å®ƒè¢«å…³é—­<sup>1</sup>ã€‚ä¾‹å¦‚ï¼š

```go
for x := range ch {
    fmt.Println(x)
}
```

channelå¯ä»¥ä½¿ç”¨`select`è¯­å¥è¿›è¡Œå¤šè·¯é€‰æ‹©ï¼Œé€‰æ‹©ä¸€ç»„å¯èƒ½çš„å‘é€æ“ä½œå’Œæ¥æ”¶æ“ä½œå»å¤„ç†<sup>1</sup>ã€‚ä¾‹å¦‚ï¼š

```go
select {
    case x := <- ch1:
        fmt.Println("Received", x)
    case y := <- ch2:
        fmt.Println("Received", y)
    case ch3 <- z:
        fmt.Println("Sent", z)
    default:
        fmt.Println("No communication")
}
```

å†…å»ºçš„`close`æ–¹æ³•å¯ä»¥ç”¨æ¥å…³é—­channel<sup>1</sup>ã€‚å…³é—­åçš„channelä¸èƒ½å†å‘é€æ•°æ®ï¼Œä½†æ˜¯è¿˜å¯ä»¥æ¥æ”¶å‰©ä½™çš„æ•°æ®<sup>1</sup>ã€‚ä¾‹å¦‚ï¼š

```go
close(ch) // å…³é—­channel
```

Goè¯­è¨€è¿˜æä¾›äº†ä¸¤ä¸ªå…³äºæ—¶é—´çš„channelï¼š`Timer`å’Œ`Ticker`<sup>1</sup>ã€‚`Timer`è¡¨ç¤ºå•æ¬¡äº‹ä»¶ï¼Œåœ¨æŒ‡å®šæ—¶é—´åè§¦å‘ï¼›`Ticker`è¡¨ç¤ºé‡å¤äº‹ä»¶ï¼Œåœ¨æŒ‡å®šæ—¶é—´é—´éš”åè§¦å‘<sup>1</sup>ã€‚ä¾‹å¦‚ï¼š

```go
timer := time.NewTimer(10 * time.Second) // åˆ›å»ºä¸€ä¸ª10ç§’åè§¦å‘çš„Timer
<- timer.C // ç­‰å¾…Timerè§¦å‘

ticker := time.NewTicker(1 * time.Second) // åˆ›å»ºä¸€ä¸ªæ¯éš”1ç§’è§¦å‘çš„Ticker
for t := range ticker.C { // ä¸æ–­ä»Tickeræ¥æ”¶æ—¶é—´å€¼
    fmt.Println(t)
}
ticker.Stop() // åœæ­¢Ticker
```

å¦‚æœä½ æƒ³äº†è§£æ›´å¤šå…³äºGoè¯­è¨€channelçš„åº•å±‚åŸç†å’Œå®ç°ç»†èŠ‚ï¼Œä½ å¯ä»¥å‚è€ƒä»¥ä¸‹ç½‘å€ï¼š

- [Go Channel è¯¦è§£ | èœé¸Ÿ
\-
\[1]: [Goè¯­è¨€Channeléå†æ–¹æ³• - CSDNåšå®¢](https://blog.csdn.net/weixin_42117918/article/details/82055634)
\[2]: [Go Channel è¯¦è§£ | èœé¸Ÿæ•™ç¨‹](https://www.runoob.com/w3cnote/go-channel-intro.html)
\[3]: [channel Â· æ·±å…¥è§£æGo](https://tiancaiamao.gitbooks.io/go-internals/content/zh/07.1.html)
\[4]: [Go è¯­è¨€ Channel å®ç°åŸç†ç²¾è¦ | Go è¯­è¨€è®¾è®¡ä¸å®ç°](https://draveness.me/golang/docs/part3-runtime/ch06-concurrency/golang-channel/)
\[5]: [Goé¢è¯•é¢˜(äº”)ï¼šå›¾è§£ Golang Channel çš„åº•å±‚åŸç† - æ˜é‡‘](https://juejin.cn/post/7037656471210819614)
\[6]: [GOè¯­è¨€åŸºç¡€è¿›é˜¶æ•™ç¨‹ï¼šchannelé€šé“ - çŸ¥ä¹ - çŸ¥ä¹ä¸“æ ](https://zhuanlan.zhihu.com/p/83163985)

<hr/>

