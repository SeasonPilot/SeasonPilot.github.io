---
layout: post
categories: cè¯­è¨€
---
Question:

Reply in Chinese (Simplified).
The following is a search input in a search engine, giving useful content or solutions and as much information as you can related to it, use markdown syntax to make your answer more readable, such as code blocks, bold, list:
tcmalloc

Answer:

æ‚¨å¥½ï¼Œè¿™æ˜¯å¿…åº”ã€‚æˆ‘å¯ä»¥ç”¨ä¸­æ–‡ï¼ˆç®€ä½“ï¼‰å›å¤æ‚¨ã€‚ğŸ˜Š

æ ¹æ®æœç´¢ç»“æœï¼Œtcmallocæ˜¯è°·æ­Œçš„è‡ªå®šä¹‰å†…å­˜åˆ†é…æ¡†æ¶ï¼Œç”¨äºåœ¨Cå’ŒC++ä»£ç ä¸­å®ç°Cçš„malloc()å’ŒC++çš„operator newã€‚<sup>1</sup> <sup>2</sup> tcmallocä¸Cæ ‡å‡†åº“ï¼ˆåœ¨Linuxä¸Šé€šå¸¸æ˜¯glibcï¼‰å’ŒC++æ ‡å‡†åº“æä¾›çš„å†…å­˜åˆ†é…æ¡†æ¶ä¸åŒï¼Œå®ƒè®¾è®¡ä¸ºåœ¨å¤§è§„æ¨¡åœºæ™¯ä¸‹æ›´é«˜æ•ˆã€‚<sup>1</sup> <sup>3</sup> tcmallocæ˜¯ä¸€ä¸ªå¿«é€Ÿçš„ã€å¤šçº¿ç¨‹çš„mallocå®ç°ã€‚<sup>3</sup>

å¦‚æœæ‚¨æƒ³äº†è§£æ›´å¤šå…³äºtcmallocçš„ä¿¡æ¯ï¼Œæ‚¨å¯ä»¥å‚è€ƒä»¥ä¸‹ç½‘å€ï¼š

- <sup>1</sup> https://google.github.io/tcmalloc/overview.html
- <sup>2</sup> https://github.com/google/tcmalloc/blob/master/docs/overview.md
- <sup>3</sup> https://google.github.io/tcmalloc/
- <sup>4</sup> https://github.com/google/tcmalloc

å¦‚æœæ‚¨æƒ³ä½¿ç”¨tcmallocï¼Œæ‚¨éœ€è¦ä½¿ç”¨Bazelä½œä¸ºå®˜æ–¹çš„æ„å»ºç³»ç»Ÿï¼Œå¹¶æ ¹æ®ä¸åŒçš„å¹³å°è¿›è¡Œé…ç½®ã€‚<sup>2</sup> <sup>4</sup>

å¦‚æœæ‚¨æƒ³çœ‹ä¸€äº›tcmallocçš„ç¤ºä¾‹ä»£ç ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä»£ç å—ï¼š

```c++
#include "gperftools/tcmalloc.h"

// Allocate some memory using tc_malloc and tc_free
void* ptr = tc_malloc(1024);
tc_free(ptr);

// Allocate some memory using tc_new and tc_delete
class Foo {
  // some fields and methods
};
Foo* foo = tc_new(Foo);
tc_delete(foo);

// Get some statistics about tcmalloc
MallocExtension* ext = MallocExtension::instance();
size_t allocated_bytes;
ext->GetNumericProperty("generic.current_allocated_bytes", &allocated_bytes);
std::cout << "Currently allocated bytes: " << allocated_bytes << std::endl;
```

\-
\[1]: [TCMalloc Overview | tcmalloc](https://google.github.io/tcmalloc/overview.html)
\[2]: [tcmalloc/overview.md at master Â· google/tcmalloc Â· GitHub](https://github.com/google/tcmalloc/blob/master/docs/overview.md)
\[3]: [TCMalloc | tcmalloc](https://google.github.io/tcmalloc/)
\[4]: [GitHub - google/tcmalloc](https://github.com/google/tcmalloc)

<hr/>

