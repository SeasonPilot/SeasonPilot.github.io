---
layout: post
categories: cè¯­è¨€
---
Question:

Reply in Chinese (Simplified).
The following is a search input in a search engine, giving useful content or solutions and as much information as you can related to it, use markdown syntax to make your answer more readable, such as code blocks, bold, list:
TCMallocä¸­çš„è·¨åº¦ï¼ˆspanï¼‰æ˜¯ä»€ä¹ˆï¼Ÿ

Answer:

ä½ å¥½ï¼Œè¿™æ˜¯Bingã€‚æˆ‘å¯ä»¥ç”¨ä¸­æ–‡ï¼ˆç®€ä½“ï¼‰å›ç­”ä½ çš„é—®é¢˜ã€‚ğŸ˜Š

æ ¹æ®æœç´¢ç»“æœ<sup>1</sup> <sup>2</sup> <sup>3</sup> <sup>4</sup> <sup>5</sup>ï¼ŒTCMallocä¸­çš„è·¨åº¦ï¼ˆspanï¼‰æ˜¯ä¸€ç§ç”¨äºç®¡ç†å†…å­˜é¡µçš„å•ä½ï¼Œå®ƒç”±ä¸€ç»„è¿ç»­çš„é¡µï¼ˆpageï¼‰ç»„æˆï¼Œæ¯ä¸ªé¡µçš„å¤§å°é€šå¸¸æ˜¯8KBã€‚ä¸€ä¸ªè·¨åº¦å¯ä»¥è®°å½•å®ƒçš„èµ·å§‹é¡µçš„IDï¼ˆstartï¼‰ï¼ŒåŒ…å«çš„é¡µçš„æ•°é‡ï¼ˆlengthï¼‰ï¼Œä»¥åŠå¯¹åº”çš„å¤§å°ç±»åˆ«ï¼ˆsize classï¼‰ã€‚ä¸€ä¸ªè·¨åº¦è¦ä¹ˆè¢«æ‹†åˆ†æˆå¤šä¸ªç›¸åŒå¤§å°ç±»åˆ«çš„å°å¯¹è±¡ç”¨äºå°å¯¹è±¡åˆ†é…ï¼Œè¦ä¹ˆä½œä¸ºä¸€ä¸ªæ•´ä½“ç”¨äºä¸­å¯¹è±¡æˆ–å¤§å¯¹è±¡åˆ†é…ã€‚è·¨åº¦ä¸­è¿˜åŒ…å«ä¸¤ä¸ªè·¨åº¦ç±»å‹çš„æŒ‡é’ˆï¼ˆprev, nextï¼‰ï¼Œç”¨äºå°†å¤šä¸ªè·¨åº¦ä»¥é“¾è¡¨çš„å½¢å¼å­˜å‚¨ã€‚

ä¸‹é¢æ˜¯ä¸€ä¸ªè·¨åº¦çš„ç»“æ„ä½“å®šä¹‰<sup>4</sup>ï¼š

```c
struct Span {
  PageID start; // starting page number
  Length length; // number of pages in span
  Span* next; // used when in link list
  Span* prev; // used when in link list
  void* objects; // linked list of free objects
  unsigned int refcount : 16; // number of non-free objects
  unsigned int sizeclass : 8; // size-class for small objects (or 0)
  unsigned int location : 2; // Is the span on a freelist, and if so, which?
  unsigned int sample : 1; // Sampled object?
};
```

å¸Œæœ›è¿™èƒ½å›ç­”ä½ çš„é—®é¢˜ã€‚å¦‚æœä½ è¿˜æœ‰å…¶ä»–é—®é¢˜ï¼Œæ¬¢è¿ç»§ç»­æé—®ã€‚ğŸ˜Š

\-
\[1]: [TCMallocè§£å¯†ï¼ˆäºŒï¼‰ - çŸ¥ä¹ - çŸ¥ä¹ä¸“æ ](https://zhuanlan.zhihu.com/p/51433411)
\[2]: [å†…å­˜ä¼˜åŒ–-æ¯”glibcæ›´å¿«çš„tcmalloc - çŸ¥ä¹ - çŸ¥ä¹ä¸“æ ](https://zhuanlan.zhihu.com/p/498691383)
\[3]: [å›¾è§£ TCMalloc - çŸ¥ä¹](https://zhuanlan.zhihu.com/p/29216091)
\[4]: [æ·±å…¥Golangå†…å­˜ç®¡ç†(ä¸€) TCMallocç¯‡ - CSDNåšå®¢](https://blog.csdn.net/qq_43188744/article/details/115355566)
\[5]: [TCMalloc å†…å­˜åˆ†é…åŸç†ç®€æ - ä¹å· - åšå®¢å›­](https://www.cnblogs.com/jiujuan/p/13869547.html)

<hr/>

