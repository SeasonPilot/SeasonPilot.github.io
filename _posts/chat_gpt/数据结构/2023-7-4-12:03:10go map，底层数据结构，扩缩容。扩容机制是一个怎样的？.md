Question:

Reply in Chinese (Simplified).
The following is a search input in a search engine, giving useful content or solutions and as much information as you can related to it, use markdown syntax to make your answer more readable, such as code blocks, bold, list:
go mapï¼Œåº•å±‚æ•°æ®ç»“æ„ï¼Œæ‰©ç¼©å®¹ã€‚æ‰©å®¹æœºåˆ¶æ˜¯ä¸€ä¸ªæ€æ ·çš„ï¼Ÿ

Answer:

æ‚¨å¥½ï¼Œè¿™æ˜¯Bingã€‚æˆ‘ä¼šç”¨ä¸­æ–‡ï¼ˆç®€ä½“ï¼‰å›å¤æ‚¨ã€‚ğŸ˜Š

Go map æ˜¯ä¸€ç§å†…ç½®çš„æ•°æ®ç»“æ„ï¼Œå®ƒå®ç°äº†ä¸€ä¸ªå“ˆå¸Œè¡¨<sup>2</sup>ã€‚å“ˆå¸Œè¡¨ç”±å¤šä¸ªå“ˆå¸Œæ¡¶ï¼ˆbucketï¼‰ç»„æˆï¼Œæ¯ä¸ªæ¡¶å¯ä»¥ä¿å­˜ä¸€ä¸ªæˆ–å¤šä¸ªé”®å€¼å¯¹<sup>3</sup>ã€‚

Go map çš„åº•å±‚æ•°æ®ç»“æ„ç”± runtime/map.go:hmap å®šä¹‰<sup>3</sup>ï¼š

```go
type hmap struct {
    count     int // å½“å‰ä¿å­˜çš„å…ƒç´ ä¸ªæ•°
    B         uint8 // bucketsæ•°ç»„çš„é•¿åº¦ä¸º2^B
    buckets   unsafe.Pointer // æŒ‡å‘bucketsæ•°ç»„çš„æŒ‡é’ˆ
    oldbuckets unsafe.Pointer // æŒ‡å‘æ—§çš„bucketsæ•°ç»„çš„æŒ‡é’ˆï¼Œç”¨äºæ‰©å®¹æ—¶çš„æ•°æ®è¿ç§»
    ...
}
```

Go map çš„æ‰©å®¹æœºåˆ¶æ˜¯è¿™æ ·çš„ï¼š

- å½“å“ˆå¸Œè¡¨çš„è´Ÿè½½å› å­ï¼ˆcount/2^Bï¼‰è¶…è¿‡ 6.5 æ—¶ï¼Œå°±ä¼šè§¦å‘æ‰©å®¹æ“ä½œ<sup>1</sup> <sup>3</sup>ã€‚
- æ‰©å®¹æ“ä½œä¼šå°† B å¢åŠ  1ï¼Œä»è€Œä½¿ buckets æ•°ç»„çš„é•¿åº¦ç¿»å€<sup>1</sup> <sup>3</sup>ã€‚
- ä¸ºäº†é¿å…ä¸€æ¬¡æ€§æ¬è¿æ‰€æœ‰çš„æ•°æ®ï¼Œæ‰©å®¹æ“ä½œä¼šé‡‡ç”¨å¢é‡æ¬è¿çš„æ–¹å¼ï¼Œæ¯æ¬¡åªæ¬è¿ä¸€ä¸ªæ—§æ¡¶åˆ°æ–°æ¡¶<sup>1</sup> <sup>3</sup>ã€‚
- åœ¨æ‰©å®¹è¿‡ç¨‹ä¸­ï¼Œoldbuckets æŒ‡é’ˆä¼šæŒ‡å‘æ—§çš„ buckets æ•°ç»„ï¼Œç”¨äºæŸ¥æ‰¾å’Œæ¬è¿æ•°æ®<sup>1</sup> <sup>3</sup>ã€‚
- å½“æ‰€æœ‰çš„æ—§æ¡¶éƒ½è¢«æ¬è¿å®Œæ¯•åï¼Œoldbuckets æŒ‡é’ˆä¼šè¢«ç½®ä¸º nilï¼Œè¡¨ç¤ºæ‰©å®¹ç»“æŸ<sup>1</sup> <sup>3</sup>ã€‚

å¦‚æœæ‚¨æƒ³äº†è§£æ›´å¤šå…³äº Go map çš„åº•å±‚å®ç°å’Œä½¿ç”¨æ–¹æ³•ï¼Œè¯·å‚è€ƒä»¥ä¸‹é“¾æ¥ï¼š

- [Golang map çš„åº•å±‚å®ç° - ç®€ä¹¦](https://www.jianshu.com/p/aa0d4808cbb8)
- [Go maps in action - The Go Programming Language](https://go.dev/blog/maps)
- [mapæ•°æ®ç»“æ„åº•å±‚è¯¦è§£ - failymao - åšå®¢å›­](https://www.cnblogs.com/failymao/p/14902607.html)
- [go - Which is the nicer way to initialize a map? - Stack Overflow](https://stackoverflow.com/questions/31064688/which-is-the-nicer-way-to-initialize-a-map)

å¸Œæœ›è¿™äº›ä¿¡æ¯å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©ã€‚å¦‚æœæ‚¨è¿˜æœ‰å…¶ä»–é—®é¢˜ï¼Œè¯·éšæ—¶æé—®ã€‚ğŸ˜Š

\-
\[1]: [Go maps in action - The Go Programming Language](https://go.dev/blog/maps)
\[2]: [mapæ•°æ®ç»“æ„åº•å±‚è¯¦è§£ - failymao - åšå®¢å›­](https://www.cnblogs.com/failymao/p/14902607.html)
\[3]: [Golang map çš„åº•å±‚å®ç° - ç®€ä¹¦](https://www.jianshu.com/p/aa0d4808cbb8)
\[4]: [go - Which is the nicer way to initialize a map? - Stack Overflow](https://stackoverflow.com/questions/31064688/which-is-the-nicer-way-to-initialize-a-map)

<hr/>

