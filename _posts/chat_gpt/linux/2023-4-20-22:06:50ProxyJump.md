---
layout: post
categories: linux
---
Question:

Reply in Chinese (Simplified).
The following is a search input in a search engine, giving useful content or solutions and as much information as you can related to it, use markdown syntax to make your answer more readable, such as code blocks, bold, list:
ProxyJump

Answer:

æ‚¨å¥½ï¼Œè¿™æ˜¯å¿…åº”ã€‚æˆ‘å¯ä»¥ç”¨ä¸­æ–‡ï¼ˆç®€ä½“ï¼‰å›å¤æ‚¨ã€‚ğŸ˜Š

ProxyJump æ˜¯ä¸€ä¸ª SSH é€‰é¡¹ï¼Œå®ƒå¯ä»¥è®©æ‚¨é€šè¿‡ä¸€ä¸ªæˆ–å¤šä¸ª SSH ä¸»æœºï¼ˆä»£ç†ï¼‰è¿æ¥åˆ°ç›®æ ‡ä¸»æœº<sup>1</sup> <sup>2</sup>ã€‚è¿™æ ·ï¼Œæ‚¨å¯ä»¥è®¿é—®ä¸€äº›å¯èƒ½è¢«éšè—åœ¨ä¼ä¸šæ•°æ®ä¸­å¿ƒæˆ–äº‘ç«¯çš„æœåŠ¡<sup>1</sup>ã€‚ProxyJump çš„ä¼˜ç‚¹æ˜¯å®ƒå¯ä»¥ä¿è¯æµé‡åœ¨ä¸­é—´ä¸»æœºä¹‹é—´å§‹ç»ˆæ˜¯ç«¯åˆ°ç«¯åŠ å¯†çš„<sup>2</sup>ï¼Œå¹¶ä¸”å¯ä»¥å‡å°‘éœ€è¦å•ç‹¬å»ºç«‹çš„éš§é“çš„æ•°é‡<sup>1</sup>ã€‚

è¦ä½¿ç”¨ ProxyJumpï¼Œæ‚¨å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸Šä½¿ç”¨ -J é€‰é¡¹ï¼ŒæŒ‡å®šè¦ç»è¿‡çš„ä»£ç†ä¸»æœºå’Œç›®æ ‡ä¸»æœº<sup>1</sup> <sup>4</sup>ã€‚ä¾‹å¦‚ï¼š

```bash
ssh -J user@<bastion:port> <user@remote:port>
```

æ‚¨ä¹Ÿå¯ä»¥åœ¨ SSH é…ç½®æ–‡ä»¶ä¸­è®¾ç½® ProxyJump é€‰é¡¹ï¼Œä»¥ä¾¿æ›´æ–¹ä¾¿åœ°ç®¡ç†ä¸åŒçš„ä¸»æœºå’Œéš§é“<sup>1</sup> <sup>2</sup>ã€‚

è¯·é—®æ‚¨æƒ³äº†è§£æ›´å¤šå…³äº ProxyJump çš„ä»€ä¹ˆå†…å®¹å‘¢ï¼Ÿ

\-
\[1]: [Proxyjump, the SSH option you probably never heard of](https://medium.com/maverislabs/proxyjump-the-ssh-option-you-probably-never-heard-of-2d7e41d43464)
\[2]: [How To Use SSH ProxyJump and SSH ProxyCommand - goteleport.com](https://goteleport.com/blog/ssh-proxyjump-ssh-proxycommand/)
\[3]: [SSH to remote hosts through a proxy or bastion with ProxyJump](https://www.redhat.com/sysadmin/ssh-proxy-bastion-proxyjump)
\[4]: [ProxyJump is safer than SSH agent forwarding | InfoWorld](https://www.infoworld.com/article/3619278/proxyjump-is-safer-than-ssh-agent-forwarding.html)

<hr/>

Question:

å¦‚ä½•åœ¨ SSH é…ç½®æ–‡ä»¶ä¸­è®¾ç½® ProxyJump é€‰é¡¹ï¼Ÿ

Answer:

è¦åœ¨ SSH é…ç½®æ–‡ä»¶ä¸­è®¾ç½® ProxyJump é€‰é¡¹ï¼Œæ‚¨å¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š

1. æ‰“å¼€æ‚¨çš„ SSH é…ç½®æ–‡ä»¶ï¼ˆé€šå¸¸æ˜¯ ~/.ssh/configï¼‰<sup>2</sup>ã€‚
2. ä¸ºæ‚¨æƒ³è¦è¿æ¥çš„ç›®æ ‡ä¸»æœºæ·»åŠ ä¸€ä¸ª Host æ®µï¼ŒæŒ‡å®šä¸»æœºåã€ç”¨æˆ·åå’Œç«¯å£<sup>2</sup>ã€‚ä¾‹å¦‚ï¼š

```bash
Host remoteserver
    HostName remoteserver
    User dev
    Port 2048
```

3. åœ¨ Host æ®µä¸­æ·»åŠ  ProxyJump é€‰é¡¹ï¼ŒæŒ‡å®šè¦ç»è¿‡çš„ä»£ç†ä¸»æœºçš„ç”¨æˆ·åå’Œä¸»æœºå<sup>2</sup>ã€‚ä¾‹å¦‚ï¼š

```bash
Host remoteserver
    HostName remoteserver
    User dev
    Port 2048
    ProxyJump user@jumpserver
```

4. ä¿å­˜å¹¶å…³é—­ SSH é…ç½®æ–‡ä»¶ã€‚
5. ä½¿ç”¨ ssh å‘½ä»¤è¿æ¥åˆ°ç›®æ ‡ä¸»æœºï¼Œåªéœ€æŒ‡å®š Host æ®µä¸­å®šä¹‰çš„ä¸»æœºåå³å¯<sup>2</sup>ã€‚ä¾‹å¦‚ï¼š

```bash
ssh remoteserver
```

è¿™æ ·ï¼Œæ‚¨å°±å¯ä»¥é€šè¿‡ä»£ç†ä¸»æœºè·³è½¬åˆ°ç›®æ ‡ä¸»æœºäº†ã€‚

è¯·é—®æ‚¨è¿˜æœ‰å…¶ä»–é—®é¢˜å—ï¼Ÿ
\-
\[1]: [How To Use SSH ProxyJump and SSH ProxyCommand - goteleport.com](https://goteleport.com/blog/ssh-proxyjump-ssh-proxycommand/)
\[2]: [SSH ProxyCommand example: Going through one host to reach ... - nixCraft](https://bing.com/search?q=how+to+set+ProxyJump+option+in+SSH+config+file)
\[3]: [Proxyjump, the SSH option you probably never heard of](https://medium.com/maverislabs/proxyjump-the-ssh-option-you-probably-never-heard-of-2d7e41d43464)
\[4]: [SSH to remote hosts through a proxy or bastion with ProxyJump](https://www.redhat.com/sysadmin/ssh-proxy-bastion-proxyjump)
\[5]: [Replace ProxyJump in ~/.ssh/config - Super User](https://superuser.com/questions/1253960/replace-proxyjump-in-ssh-config)

<hr/>

