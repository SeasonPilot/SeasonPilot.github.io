---
layout: post
categories: linux
---
Question:

Reply in Chinese (Simplified).Explain the following code:
"/* If this file is already in the ready list we exit soon */
if (!ep_is_linked(&epi->rdllink)) {
    list_add_tail(&epi->rdllink, &ep->rdllist);
    ep_pm_stay_awake_rcu(epi);
}"

Answer:

æ‚¨å¥½ï¼Œè¿™æ˜¯å¿…åº”ã€‚æˆ‘ä¼šç”¨ç®€ä½“ä¸­æ–‡å›å¤æ‚¨ã€‚ğŸ˜Š

è¿™æ®µä»£ç æ˜¯ç”¨äºLinuxç³»ç»Ÿçš„epollæœºåˆ¶çš„ä¸€éƒ¨åˆ†ã€‚epollæ˜¯ä¸€ç§å¯æ‰©å±•çš„I/Oäº‹ä»¶é€šçŸ¥æœºåˆ¶ï¼Œå¯ä»¥ç›‘è§†å¤šä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼Œçœ‹æ˜¯å¦æœ‰I/Oæ“ä½œå¯èƒ½<sup>3</sup> <sup>4</sup>ã€‚

è¿™æ®µä»£ç çš„åŠŸèƒ½æ˜¯ï¼š

- æ£€æŸ¥ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦æ˜¯å¦å·²ç»åœ¨å°±ç»ªåˆ—è¡¨ä¸­ï¼Œå¦‚æœæ˜¯ï¼Œå°±ä¸åšä»»ä½•æ“ä½œï¼Œç›´æ¥é€€å‡ºã€‚
- å¦‚æœä¸æ˜¯ï¼Œå°±æŠŠå®ƒåŠ å…¥åˆ°å°±ç»ªåˆ—è¡¨çš„å°¾éƒ¨ï¼Œå¹¶è°ƒç”¨ep_pm_stay_awake_rcuå‡½æ•°ï¼Œé˜²æ­¢ç³»ç»Ÿè¿›å…¥è‡ªåŠ¨ä¼‘çœ æ¨¡å¼<sup>4</sup>ã€‚
- è¿™æ ·ï¼Œå½“è°ƒç”¨epoll_waitå‡½æ•°æ—¶ï¼Œå°±å¯ä»¥å¾—åˆ°å°±ç»ªåˆ—è¡¨ä¸­çš„æ–‡ä»¶æè¿°ç¬¦ï¼Œè¿›è¡Œç›¸åº”çš„I/Oæ“ä½œã€‚

\-
\[1]: [epoll - Wikipedia](https://en.wikipedia.org/wiki/Epoll)
\[2]: [epoll(7) - Linux manual page - man7.org](https://man7.org/linux/man-pages/man7/epoll.7.html)
\[3]: [How to use epoll? A complete example in C - intrepid Geeks](https://intrepidgeeks.com/tutorial/how-to-use-epoll-a-complete-example-in-c)
\[4]: [Async IO on Linux: select, poll, and epoll - Julia Evans](https://jvns.ca/blog/2017/06/03/async-io-on-linux--select--poll--and-epoll/)
\[5]: [linux - How do I use epoll? - Stack Overflow](https://stackoverflow.com/questions/31230708/how-do-i-use-epoll)

<hr/>

