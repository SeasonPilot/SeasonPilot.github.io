Question:

Reply in Chinese (Simplified).
The following is a search input in a search engine, giving useful content or solutions and as much information as you can related to it, use markdown syntax to make your answer more readable, such as code blocks, bold, list:
ssh -J root@180.184.99.75  -i demo-jump.pem  root@172.19.30.100

Answer:

æ‚¨å¥½ï¼Œè¿™æ˜¯å¿…åº”ã€‚æˆ‘å°†ç”¨ä¸­æ–‡ï¼ˆç®€ä½“ï¼‰å›å¤æ‚¨ã€‚

æ‚¨è¾“å…¥çš„æ˜¯ä¸€ä¸ªSSHå‘½ä»¤ï¼Œç”¨äºé€šè¿‡ä¸€ä¸ªä»£ç†æˆ–å ¡å’ä¸»æœºè¿æ¥åˆ°ä¸€ä¸ªè¿œç¨‹ä¸»æœºã€‚SSHæ˜¯ä¸€ç§å®‰å…¨çš„ç½‘ç»œåè®®ï¼Œå¯ä»¥åŠ å¯†å’Œè®¤è¯æ•°æ®ä¼ è¾“<sup>2</sup>ã€‚

è¿™ä¸ªå‘½ä»¤çš„æ ¼å¼å’Œå«ä¹‰å¦‚ä¸‹ï¼š

```bash
ssh -J root@180.184.99.75  -i demo-jump.pem  root@172.19.30.100
```

- `ssh`æ˜¯SSHå®¢æˆ·ç«¯ç¨‹åºçš„åç§°ï¼Œç”¨äºå¯åŠ¨ä¸€ä¸ªSSHä¼šè¯ã€‚
- `-J`æ˜¯ä¸€ä¸ªé€‰é¡¹ï¼Œè¡¨ç¤ºä½¿ç”¨ProxyJumpåŠŸèƒ½ï¼Œå³é€šè¿‡ä¸€ä¸ªæˆ–å¤šä¸ªä¸­é—´ä¸»æœºè·³è½¬åˆ°ç›®æ ‡ä¸»æœº<sup>1</sup> <sup>2</sup>ã€‚
- `root@180.184.99.75`æ˜¯ç¬¬ä¸€ä¸ªä¸­é—´ä¸»æœºçš„ç”¨æˆ·åå’Œåœ°å€ï¼Œä¹Ÿå°±æ˜¯ä»£ç†æˆ–å ¡å’ä¸»æœºã€‚è¿™é‡Œå‡è®¾æ‚¨å·²ç»æœ‰äº†è¿™ä¸ªä¸»æœºçš„è®¿é—®æƒé™ã€‚
- `-i`æ˜¯ä¸€ä¸ªé€‰é¡¹ï¼Œè¡¨ç¤ºä½¿ç”¨æŒ‡å®šçš„æ–‡ä»¶ä½œä¸ºç§é’¥æ¥è®¤è¯<sup>2</sup>ã€‚
- `demo-jump.pem`æ˜¯ç§é’¥æ–‡ä»¶çš„åç§°ï¼Œç”¨äºè¿æ¥åˆ°ç¬¬ä¸€ä¸ªä¸­é—´ä¸»æœºã€‚è¿™é‡Œå‡è®¾æ‚¨å·²ç»æœ‰äº†è¿™ä¸ªæ–‡ä»¶ï¼Œå¹¶ä¸”å®ƒçš„æƒé™è®¾ç½®ä¸ºåªæœ‰æ‚¨å¯ä»¥è¯»å–ã€‚
- `root@172.19.30.100`æ˜¯ç›®æ ‡ä¸»æœºçš„ç”¨æˆ·åå’Œåœ°å€ï¼Œä¹Ÿå°±æ˜¯æ‚¨æœ€ç»ˆæƒ³è¦è®¿é—®çš„ä¸»æœºã€‚è¿™é‡Œå‡è®¾æ‚¨å·²ç»æœ‰äº†è¿™ä¸ªä¸»æœºçš„è®¿é—®æƒé™ï¼Œå¹¶ä¸”å®ƒå¯ä»¥ä»ç¬¬ä¸€ä¸ªä¸­é—´ä¸»æœºè®¿é—®ã€‚

æ‰§è¡Œè¿™ä¸ªå‘½ä»¤åï¼Œæ‚¨å°†ä¼šå…ˆè¿æ¥åˆ°ç¬¬ä¸€ä¸ªä¸­é—´ä¸»æœºï¼Œç„¶åå†è¿æ¥åˆ°ç›®æ ‡ä¸»æœºã€‚å¦‚æœæˆåŠŸï¼Œæ‚¨å°†ä¼šçœ‹åˆ°ç›®æ ‡ä¸»æœºçš„shellæç¤ºç¬¦ï¼Œå¯ä»¥åœ¨ä¸Šé¢æ‰§è¡Œä»»ä½•å‘½ä»¤<sup>4</sup>ã€‚

è¿™ä¸ªå‘½ä»¤å¯ä»¥å¸®åŠ©æ‚¨åœ¨ä¸ç›´æ¥æš´éœ²ç›®æ ‡ä¸»æœºåœ°å€çš„æƒ…å†µä¸‹ï¼Œå®‰å…¨åœ°è®¿é—®å®ƒã€‚å®ƒä¹Ÿå¯ä»¥å¸®åŠ©æ‚¨ç»•è¿‡ä¸€äº›ç½‘ç»œé™åˆ¶æˆ–é˜²ç«å¢™<sup>1</sup>ã€‚

å¸Œæœ›è¿™äº›ä¿¡æ¯å¯¹æ‚¨æœ‰ç”¨ã€‚å¦‚æœæ‚¨è¿˜æœ‰å…¶ä»–é—®é¢˜ï¼Œè¯·éšæ—¶æå‡ºã€‚ğŸ˜Š

\-
\[1]: [ssh(1) - Linux manual page - Michael Kerrisk](https://www.man7.org/linux/man-pages/man1/ssh.1.html)
\[2]: [SSH to remote hosts though a proxy or bastion with ProxyJump | Enable Sysadmin](https://www.redhat.com/sysadmin/ssh-proxy-bastion-proxyjump)
\[3]: [19 Common SSH Commands in Linux With Examples - Knowledge Base by ...](https://phoenixnap.com/kb/linux-ssh-commands)
\[4]: [SSH command usage, options, and configuration in Linux/Unix](https://www.ssh.com/academy/ssh/command)

<hr/>

Question:

root@180.184.99.75 éœ€è¦ä½¿ç”¨ demo-jump.pem ç§é’¥æ–‡ä»¶è¿›è¡Œç™»å½•

Answer:

æ˜¯çš„ï¼Œæ‚¨éœ€è¦ä½¿ç”¨ demo-jump.pem ç§é’¥æ–‡ä»¶æ¥ç™»å½• root@180.184.99.75 è¿™ä¸ªä¸­é—´ä¸»æœºã€‚è¿™æ˜¯å› ä¸ºæ‚¨åœ¨SSHå‘½ä»¤ä¸­ä½¿ç”¨äº† -i é€‰é¡¹ï¼ŒæŒ‡å®šäº†è¿™ä¸ªæ–‡ä»¶ä½œä¸ºç§é’¥[^2^ã€‚å¦‚æœæ‚¨ä¸ä½¿ç”¨ -i é€‰é¡¹ï¼ŒSSHå®¢æˆ·ç«¯ä¼šé»˜è®¤ä½¿ç”¨ ~/.ssh/id_rsa æˆ– ~/.ssh/id_dsa è¿™äº›æ–‡ä»¶ä½œä¸ºç§é’¥[^2^ã€‚è¯·ç¡®ä¿æ‚¨æœ‰ demo-jump.pem æ–‡ä»¶çš„è®¿é—®æƒé™ï¼Œå¹¶ä¸”å®ƒçš„æƒé™è®¾ç½®ä¸ºåªæœ‰æ‚¨å¯ä»¥è¯»å–ã€‚


<hr/>

Question:

æˆ‘æ‰§è¡Œä¸Šæ–‡ä¸­çš„å‘½ä»¤æ—¶è®©æˆ‘è¾“å…¥ root@180.184.99.75's password

Answer:

è¿™å¯èƒ½æ˜¯å› ä¸ºæ‚¨çš„ demo-jump.pem ç§é’¥æ–‡ä»¶æ²¡æœ‰è¢« root@180.184.99.75 è¿™ä¸ªä¸­é—´ä¸»æœºæ¥å—ï¼Œæˆ–è€…æ‚¨æ²¡æœ‰æ­£ç¡®åœ°è®¾ç½®å®ƒçš„æƒé™ã€‚æ‚¨å¯ä»¥å°è¯•ä»¥ä¸‹å‡ ç§æ–¹æ³•æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼š

- æ£€æŸ¥æ‚¨çš„ demo-jump.pem æ–‡ä»¶æ˜¯å¦ä¸ root@180.184.99.75 è¿™ä¸ªä¸­é—´ä¸»æœºçš„å…¬é’¥åŒ¹é…ã€‚å¦‚æœä¸åŒ¹é…ï¼Œæ‚¨éœ€è¦é‡æ–°ç”Ÿæˆä¸€ä¸ªç§é’¥æ–‡ä»¶ï¼Œå¹¶å°†å…¶å¯¹åº”çš„å…¬é’¥æ·»åŠ åˆ°ä¸­é—´ä¸»æœºçš„ ~/.ssh/authorized_keys æ–‡ä»¶ä¸­ã€‚
- æ£€æŸ¥æ‚¨çš„ demo-jump.pem æ–‡ä»¶æ˜¯å¦æœ‰æ­£ç¡®çš„æƒé™è®¾ç½®ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œç§é’¥æ–‡ä»¶åº”è¯¥åªèƒ½è¢«æ‚¨è‡ªå·±è¯»å–ï¼Œä¸èƒ½è¢«å…¶ä»–äººè¯»å–æˆ–å†™å…¥ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ chmod å‘½ä»¤æ¥ä¿®æ”¹æ–‡ä»¶æƒé™ï¼Œä¾‹å¦‚ chmod 600 demo-jump.pemã€‚
- æ£€æŸ¥æ‚¨çš„ SSH å®¢æˆ·ç«¯æ˜¯å¦æ”¯æŒ ProxyJump åŠŸèƒ½ã€‚å¦‚æœæ‚¨çš„ SSH å®¢æˆ·ç«¯ç‰ˆæœ¬ä½äº 7.3ï¼Œæ‚¨å¯èƒ½éœ€è¦å‡çº§å®ƒï¼Œæˆ–è€…ä½¿ç”¨å…¶ä»–æ–¹æ³•æ¥å®ç°è·³è½¬ï¼Œä¾‹å¦‚ ProxyCommand é€‰é¡¹ã€‚
- å¦‚æœä»¥ä¸Šæ–¹æ³•éƒ½ä¸èµ·ä½œç”¨ï¼Œæ‚¨å¯ä»¥å°è¯•ä½¿ç”¨å¯†ç æ¥ç™»å½• root@180.184.99.75 è¿™ä¸ªä¸­é—´ä¸»æœºï¼Œè€Œä¸æ˜¯ä½¿ç”¨ç§é’¥æ–‡ä»¶ã€‚ä½†æ˜¯è¿™æ ·åšå¯èƒ½ä¼šé™ä½å®‰å…¨æ€§ï¼Œå› ä¸ºå¯†ç å¯èƒ½ä¼šè¢«çªƒå–æˆ–ç ´è§£ã€‚


<hr/>

Question:

ssh -J å¯ä»¥å’Œ-i ä¸€èµ·ä½¿ç”¨å—ï¼Ÿ

Answer:

æ˜¯çš„ï¼Œssh -J å¯ä»¥å’Œ -i ä¸€èµ·ä½¿ç”¨ã€‚è¿™æ ·åšå¯ä»¥è®©æ‚¨ä¸ºæ¯ä¸ªä¸­é—´ä¸»æœºå’Œç›®æ ‡ä¸»æœºæŒ‡å®šä¸åŒçš„ç§é’¥æ–‡ä»¶ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨æœ‰ä¸¤ä¸ªä¸­é—´ä¸»æœº A å’Œ Bï¼Œä»¥åŠä¸€ä¸ªç›®æ ‡ä¸»æœº Cï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥è¿æ¥ï¼š

```bash
ssh -J -i keyA.pem userA@A -i keyB.pem userB@B -i keyC.pem userC@C
```

è¿™ä¸ªå‘½ä»¤ä¼šå…ˆä½¿ç”¨ keyA.pem æ–‡ä»¶æ¥ç™»å½• Aï¼Œç„¶åä½¿ç”¨ keyB.pem æ–‡ä»¶æ¥ç™»å½• Bï¼Œæœ€åä½¿ç”¨ keyC.pem æ–‡ä»¶æ¥ç™»å½• Cã€‚è¯·æ³¨æ„ï¼Œæ¯ä¸ª -i é€‰é¡¹åé¢éƒ½è¦è·Ÿç€ç›¸åº”çš„ç”¨æˆ·åå’Œåœ°å€ã€‚


<hr/>

Question:

kex_exchange_identification: Connection closed by remote host            
Connection closed by UNKNOWN port 65535

Answer:

è¿™ä¸ªé”™è¯¯å¯èƒ½æ˜¯ç”±äºæœåŠ¡å™¨æˆ–å®¢æˆ·ç«¯ä¹‹é—´çš„è¿æ¥ä¸­æ–­æˆ–è®¾å¤‡æ•…éšœå¯¼è‡´çš„<sup>1</sup>ã€‚æ‚¨å¯ä»¥å°è¯•ä»¥ä¸‹å‡ ç§æ–¹æ³•æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼š

- ç¡®ä¿æ‚¨ä½¿ç”¨äº†æ­£ç¡®çš„ç™»å½•å‡­è¯ï¼ŒåŒ…æ‹¬ç”¨æˆ·åã€åœ°å€ã€ç«¯å£å·å’Œç§é’¥æ–‡ä»¶<sup>3</sup>ã€‚
- ç¡®ä¿æ‚¨çš„æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ä¹‹é—´æ²¡æœ‰é˜²ç«å¢™æˆ–å…¶ä»–ç½‘ç»œè®¾å¤‡é˜»æ­¢äº†SSHè¿æ¥<sup>2</sup>ã€‚
- ç¡®ä¿æ‚¨çš„æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯çš„SSHç‰ˆæœ¬å’Œé…ç½®æ˜¯å…¼å®¹çš„ï¼Œç‰¹åˆ«æ˜¯å…³äºå¯†é’¥äº¤æ¢ç®—æ³•å’ŒåŠ å¯†æ–¹å¼çš„è®¾ç½®<sup>4</sup>ã€‚
- åœ¨æ‚¨çš„æœåŠ¡å™¨æˆ–å®¢æˆ·ç«¯çš„SSHé…ç½®æ–‡ä»¶ä¸­æ·»åŠ ä¸€ä¸ªâ€œkeepaliveâ€è¯­å¥ï¼Œä»¥é˜²æ­¢è¿æ¥ç©ºé—²è¶…æ—¶<sup>1</sup>ã€‚ä¾‹å¦‚ï¼Œåœ¨ ~/.ssh/config æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š

```bash
Host *
  ServerAliveInterval 60
  ServerAliveCountMax 3
```

è¿™æ ·åšå¯ä»¥è®©å®¢æˆ·ç«¯æ¯éš”60ç§’å‘æœåŠ¡å™¨å‘é€ä¸€ä¸ªä¿¡å·ï¼Œå¦‚æœè¿ç»­3æ¬¡æ²¡æœ‰æ”¶åˆ°å›åº”ï¼Œå°±æ–­å¼€è¿æ¥ã€‚

\-
\[1]: [How to fix â€œkex_exchange_identification: Connection closed by remote ...](https://itslinuxfoss.com/fix-kex-exchange-identification-error/)
\[2]: [How to Fix kex_exchange_identification: connection closed by remote host](https://techcolleague.com/kex-exchange-identification-connection-closed-by-remote-host/)
\[3]: [What causes SSH error: kex_exchange_identification: Connection closed ...](https://serverfault.com/questions/1015547/what-causes-ssh-error-kex-exchange-identification-connection-closed-by-remote)
\[4]: [SSH troubles: ssh_exchange_identification/kex_exchange_identification ...](https://superuser.com/questions/1582516/ssh-troubles-ssh-exchange-identification-kex-exchange-identification-connectio)

<hr/>

Question:

ssh -J -i   ç¬¬ä¸€ä¸ªä¸­é—´ä¸»æœºä½¿ç”¨ç§é’¥ç™»å½•ï¼Œæœ€ç»ˆæƒ³è¦è®¿é—®çš„ä¸»æœºä½¿ç”¨å¯†ç ç™»å½•ï¼Œæ€ä¹ˆåšï¼Ÿ

Answer:

å¦‚æœæ‚¨æƒ³è¦ä½¿ç”¨ç§é’¥æ–‡ä»¶æ¥ç™»å½•ç¬¬ä¸€ä¸ªä¸­é—´ä¸»æœºï¼Œç„¶åä½¿ç”¨å¯†ç æ¥ç™»å½•æœ€ç»ˆçš„ç›®æ ‡ä¸»æœºï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š

```bash
ssh -J -i key.pem userA@A userB@B
```

è¿™ä¸ªå‘½ä»¤ä¼šå…ˆä½¿ç”¨ key.pem æ–‡ä»¶æ¥ç™»å½• userA@A è¿™ä¸ªä¸­é—´ä¸»æœºï¼Œç„¶åæç¤ºæ‚¨è¾“å…¥ userB@B è¿™ä¸ªç›®æ ‡ä¸»æœºçš„å¯†ç ã€‚è¯·æ³¨æ„ï¼Œæ‚¨ä¸éœ€è¦ä¸ºç›®æ ‡ä¸»æœºæŒ‡å®š -i é€‰é¡¹ï¼Œå› ä¸ºæ‚¨ä¸ä½¿ç”¨ç§é’¥æ–‡ä»¶æ¥ç™»å½•å®ƒã€‚


<hr/>

Question:

kex_exchange_identification: Connection closed by remote host           
Connection closed by UNKNOWN port 65535

Answer:

This error may be caused by the interruption or failure of the connection between the server or client<sup>1</sup>. You can try the following methods to solve this problem:

- Make sure you use the correct login credentials, including username, address, port number and private key file<sup>3</sup>.
- Make sure there is no firewall or other network device blocking the SSH connection between your server and client<sup>2</sup>.
- Make sure your server and client's SSH version and configuration are compatible, especially the settings for key exchange algorithm and encryption method<sup>4</sup>.
- Add a "keepalive" statement to your server or client's SSH configuration file to prevent the connection from timing out due to idleness<sup>1</sup>. For example, add the following to the ~/.ssh/config file:

```bash
Host *
  ServerAliveInterval 60
  ServerAliveCountMax 3
```

This will make the client send a signal to the server every 60 seconds, and disconnect if there is no response for 3 consecutive times.

\-
\[1]: [How to fix â€œkex_exchange_identification: Connection closed by remote ...](https://itslinuxfoss.com/fix-kex-exchange-identification-error/)
\[2]: [How to Fix kex_exchange_identification: connection closed by remote host](https://techcolleague.com/kex-exchange-identification-connection-closed-by-remote-host/)
\[3]: [What causes SSH error: kex_exchange_identification: Connection closed ...](https://serverfault.com/questions/1015547/what-causes-ssh-error-kex-exchange-identification-connection-closed-by-remote)
\[4]: [SSH troubles: ssh_exchange_identification/kex_exchange_identification ...](https://superuser.com/questions/1582516/ssh-troubles-ssh-exchange-identification-kex-exchange-identification-connectio)
\[5]: [Continued issue with kex_exchange_identification: Connection closed by ...](https://askubuntu.com/questions/1413264/continued-issue-with-kex-exchange-identification-connection-closed-by-remote-ho)

<hr/>

