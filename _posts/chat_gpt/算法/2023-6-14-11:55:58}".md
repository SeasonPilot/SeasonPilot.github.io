Question:

Reply in Chinese (Simplified).Explain the following code:
"class Solution {
    private class Pair {
        int val, id;
        Pair(int val, int id) {
            // è®°å½•æ•°ç»„çš„å…ƒç´ å€¼
            this.val = val;
            // è®°å½•å…ƒç´ åœ¨æ•°ç»„ä¸­çš„åŸå§‹ç´¢å¼•
            this.id = id;
        }
    }
    
    // å½’å¹¶æ’åºæ‰€ç”¨çš„è¾…åŠ©æ•°ç»„
    private Pair[] temp;
    // è®°å½•æ¯ä¸ªå…ƒç´ åé¢æ¯”è‡ªå·±å°çš„å…ƒç´ ä¸ªæ•°
    private int[] count;
    
    // ä¸»å‡½æ•°
    public List<Integer> countSmaller(int[] nums) {
        int n = nums.length;
        count = new int[n];
        temp = new Pair[n];
        Pair[] arr = new Pair[n];
        // è®°å½•å…ƒç´ åŸå§‹çš„ç´¢å¼•ä½ç½®ï¼Œä»¥ä¾¿åœ¨ count æ•°ç»„ä¸­æ›´æ–°ç»“æœ
        for (int i = 0; i < n; i++)
            arr[i] = new Pair(nums[i], i);
        
        // æ‰§è¡Œå½’å¹¶æ’åºï¼Œæœ¬é¢˜ç»“æœè¢«è®°å½•åœ¨ count æ•°ç»„ä¸­
        sort(arr, 0, n - 1);
        
        List<Integer> res = new LinkedList<>();
        for (int c : count) res.add(c);
        return res;
    }
    
    // å½’å¹¶æ’åº
    private void sort(Pair[] arr, int lo, int hi) {
        if (lo == hi) return;
        int mid = lo + (hi - lo) / 2;
        sort(arr, lo, mid);
        sort(arr, mid + 1, hi);
        merge(arr, lo, mid, hi);
    }
    
    // åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„
    private void merge(Pair[] arr, int lo, int mid, int hi) {
        for (int i = lo; i <= hi; i++) {
            temp[i] = arr[i];
        }
        
        int i = lo, j = mid + 1;
        for (int p = lo; p <= hi; p++) {
            if (i == mid + 1) {
                arr[p] = temp[j++];
            } else if (j == hi + 1) {
                arr[p] = temp[i++];
                // æ›´æ–° count æ•°ç»„
                count[arr[p].id] += j - mid - 1;
            } else if (temp[i].val > temp[j].val) {
                arr[p] = temp[j++];
            } else {
                arr[p] = temp[i++];
                // æ›´æ–° count æ•°ç»„
                count[arr[p].id] += j - mid - 1;
            }
        }
    }
}"

Answer:

ä½ å¥½ï¼Œè¿™æ˜¯å¿…åº”ã€‚æˆ‘å¯ä»¥ç”¨ä¸­æ–‡å›ç­”ä½ çš„é—®é¢˜ã€‚ğŸ˜Š

è¿™æ®µä»£ç æ˜¯ç”¨Javaè¯­è¨€ç¼–å†™çš„ï¼Œå®ƒçš„åŠŸèƒ½æ˜¯è®¡ç®—ä¸€ä¸ªæ•´æ•°æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ åé¢æ¯”è‡ªå·±å°çš„å…ƒç´ çš„ä¸ªæ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªåˆ—è¡¨ã€‚<sup>7</sup>

ä»£ç ä¸­ä½¿ç”¨äº†ä¸€ä¸ªå†…éƒ¨ç±»Pairï¼Œä¸€ä¸ªè¾…åŠ©æ•°ç»„tempï¼Œä¸€ä¸ªç»“æœæ•°ç»„countï¼Œä»¥åŠä¸€ä¸ªä¸»å‡½æ•°countSmallerå’Œä¸¤ä¸ªè¾…åŠ©å‡½æ•°sortå’Œmergeã€‚<sup>7</sup>

Pairç±»ç”¨äºå­˜å‚¨æ•°ç»„çš„å…ƒç´ å€¼å’ŒåŸå§‹ç´¢å¼•ï¼Œæ–¹ä¾¿åœ¨countæ•°ç»„ä¸­æ›´æ–°ç»“æœã€‚<sup>7</sup>

tempæ•°ç»„ç”¨äºå½’å¹¶æ’åºæ—¶å­˜å‚¨ä¸´æ—¶æ•°æ®ã€‚<sup>7</sup>

countæ•°ç»„ç”¨äºè®°å½•æ¯ä¸ªå…ƒç´ åé¢æ¯”è‡ªå·±å°çš„å…ƒç´ çš„ä¸ªæ•°ã€‚<sup>7</sup>

countSmallerå‡½æ•°æ˜¯ä¸»å‡½æ•°ï¼Œå®ƒé¦–å…ˆåˆ›å»ºäº†ä¸€ä¸ªPairç±»å‹çš„æ•°ç»„arrï¼Œç”¨äºå­˜å‚¨åŸå§‹æ•°ç»„numsä¸­çš„å…ƒç´ å€¼å’Œç´¢å¼•ã€‚ç„¶åè°ƒç”¨sortå‡½æ•°å¯¹arrè¿›è¡Œå½’å¹¶æ’åºï¼Œå¹¶åœ¨æ’åºè¿‡ç¨‹ä¸­æ›´æ–°countæ•°ç»„ã€‚æœ€åå°†countæ•°ç»„è½¬æ¢ä¸ºåˆ—è¡¨å¹¶è¿”å›ã€‚<sup>7</sup>

sortå‡½æ•°æ˜¯å½’å¹¶æ’åºçš„ä¸»è¦é€»è¾‘ï¼Œå®ƒä½¿ç”¨åˆ†æ²»æ³•å°†æ•°ç»„åˆ†æˆä¸¤åŠï¼Œåˆ†åˆ«å¯¹å·¦å³ä¸¤åŠè¿›è¡Œæ’åºï¼Œç„¶åè°ƒç”¨mergeå‡½æ•°å°†ä¸¤ä¸ªæœ‰åºçš„å­æ•°ç»„åˆå¹¶ä¸ºä¸€ä¸ªæœ‰åºçš„æ•°ç»„ã€‚<sup>7</sup>

mergeå‡½æ•°æ˜¯å½’å¹¶æ’åºçš„æ ¸å¿ƒæ­¥éª¤ï¼Œå®ƒä½¿ç”¨åŒæŒ‡é’ˆæ³•å°†ä¸¤ä¸ªæœ‰åºçš„å­æ•°ç»„åˆå¹¶ä¸ºä¸€ä¸ªæœ‰åºçš„æ•°ç»„ï¼Œå¹¶åœ¨åˆå¹¶è¿‡ç¨‹ä¸­æ›´æ–°countæ•°ç»„ã€‚å…·ä½“åœ°ï¼Œå¦‚æœå·¦è¾¹çš„å…ƒç´ å¤§äºå³è¾¹çš„å…ƒç´ ï¼Œåˆ™è¯´æ˜å·¦è¾¹çš„å…ƒç´ åé¢æœ‰ä¸€ä¸ªæ¯”å®ƒå°çš„å…ƒç´ ï¼Œæ‰€ä»¥åœ¨countæ•°ç»„ä¸­å¯¹åº”ä½ç½®åŠ ä¸Šå³è¾¹å­æ•°ç»„å·²ç»åˆå¹¶è¿‡çš„å…ƒç´ ä¸ªæ•°ï¼ˆå³j - mid - 1ï¼‰ã€‚<sup>7</sup>

è¿™æ®µä»£ç çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(nlogn)ï¼Œç©ºé—´å¤æ‚åº¦æ˜¯O(n)ï¼Œå…¶ä¸­næ˜¯åŸå§‹æ•°ç»„numsçš„é•¿åº¦ã€‚<sup>7</sup>

ä½ æƒ³äº†è§£æ›´å¤šå…³äºè¿™æ®µä»£ç æˆ–Javaè¯­è¨€çš„ä»€ä¹ˆå‘¢ï¼Ÿ

\-
\[1]: [Explaining Java constructs - Department of Computer Science](https://www.cs.cornell.edu/courses/cs2110/2017fa/online/explainJava/explainJava.html)
\[2]: [how to use chinese and japanese character as string in java?](https://stackoverflow.com/questions/4067628/how-to-use-chinese-and-japanese-character-as-string-in-java)
\[3]: [java - How to get Chinese locale to display in chinese as specifically ...](https://stackoverflow.com/questions/27258095/how-to-get-chinese-locale-to-display-in-chinese-as-specifically-simplified-or-tr)
\[4]: [Denigma - AI that reads and explains code in understandable english](https://denigma.app/)
\[5]: [Introduction to Chinese Remainder Theorem - GeeksforGeeks](https://www.geeksforgeeks.org/introduction-to-chinese-remainder-theorem/)
\[6]: [Introduction to Programming in Java](https://introcs.cs.princeton.edu/java/home/chapter1.pdf)
\[7]: [Writing Clear Code - Princeton University](https://introcs.cs.princeton.edu/java/11style/)

<hr/>

