---
layout: post
categories: k8s
---
Question:

Reply in Chinese (Simplified).
The following is a search input in a search engine, giving useful content or solutions and as much information as you can related to it, use markdown syntax to make your answer more readable, such as code blocks, bold, list:
pv å’Œ POD éœ€è¦åœ¨åŒä¸€ä¸ªèŠ‚ç‚¹ä¸Šå—ï¼Ÿ

Answer:

æ‚¨å¥½ï¼Œè¿™æ˜¯å¿…åº”ã€‚æˆ‘å¯ä»¥ç”¨ä¸­æ–‡ï¼ˆç®€ä½“ï¼‰å›å¤æ‚¨ã€‚ğŸ˜Š

æ‚¨çš„é—®é¢˜æ˜¯ï¼špv å’Œ POD éœ€è¦åœ¨åŒä¸€ä¸ªèŠ‚ç‚¹ä¸Šå—ï¼Ÿ

ç­”æ¡ˆæ˜¯ï¼šè¿™å–å†³äº pv çš„ç±»å‹å’Œå­˜å‚¨ç±»ã€‚æœ‰äº› pv ç±»å‹ï¼Œå¦‚ localï¼Œåªèƒ½è¢«åŒä¸€ä¸ªèŠ‚ç‚¹ä¸Šçš„ pod ä½¿ç”¨<sup>1</sup>ã€‚æœ‰äº› pv ç±»å‹ï¼Œå¦‚ nfsï¼Œå¯ä»¥è¢«ä¸åŒèŠ‚ç‚¹ä¸Šçš„ pod ä½¿ç”¨<sup>4</sup>ã€‚å­˜å‚¨ç±»å¯ä»¥å®šä¹‰ pv çš„åŠ¨æ€åˆ†é…å’Œå›æ”¶ç­–ç•¥<sup>3</sup>ã€‚

pv æ˜¯æŒä¹…å·ï¼Œæ˜¯é›†ç¾¤èµ„æºï¼Œå®ƒä»¬çš„ç”Ÿå‘½å‘¨æœŸè·Ÿä½¿ç”¨å®ƒä»¬çš„ pod æ—¶ç›¸äº’ç‹¬ç«‹<sup>2</sup> <sup>4</sup>ã€‚pod è¦ä½¿ç”¨ pvï¼Œéœ€è¦é€šè¿‡ pvc æ¥è¯·æ±‚<sup>2</sup> <sup>5</sup>ã€‚pvc æ˜¯æŒä¹…å·ç”³é¢†ï¼Œæ˜¯ç”¨æˆ·å¯¹å­˜å‚¨çš„è¯·æ±‚<sup>2</sup>ã€‚pod å¯ä»¥æŒ‡å®š pvc æ¥æ¶ˆè´¹ä¸ä¹‹ç»‘å®šçš„ pv <sup>6</sup>ã€‚

å¦‚æœæ‚¨æƒ³äº†è§£æ›´å¤šå…³äº pv å’Œ pod çš„ä¿¡æ¯ï¼Œæ‚¨å¯ä»¥å‚è€ƒä»¥ä¸‹ç½‘å€ï¼š

- [kubernetes Local PVåŸºæœ¬ä½¿ç”¨ä»¥åŠåŸç† - ä¸ªäººæ–‡ç«  - SegmentFault æ€å¦](https://segmentfault.com/a/1190000040882124) (ç¼–å· 1)
- [Kubernetesä¸­çš„PVå’ŒPVCåˆ†æä¸ä½¿ç”¨ - è…¾è®¯äº‘å¼€å‘è€…ç¤¾åŒº-è…¾è®¯äº‘](https://cloud.tencent.com/developer/article/1857710) (ç¼–å· 2)
- [kuberneteså­˜å‚¨ç±»ä¸PVä¸PVCå…³ç³»åŠå®è·µ - fat_girl_spring - åšå®¢å›­](https://www.cnblogs.com/fat-girl-spring/p/14545547.html) (ç¼–å· 3)
- [æŒä¹…å· | Kubernetes](https://kubernetes.io/zh/docs/concepts/storage/persistent-volumes/) (ç¼–å· 4)
- [é…ç½® Pod ä»¥ä½¿ç”¨ PersistentVolume ä½œä¸ºå­˜å‚¨ | Kubernetes](https://kubernetes.io/zh/docs/tasks/configure-pod-container/configure-persistent-volume-storage/) (ç¼–å· 5)
- [Kubernetes PV å’Œ PVC ç»‘å®šæµç¨‹åŠé¢„ç»‘å®š (Pre-Binding) - çŸ¥ä¹](https://zhuanlan.zhihu.com/p/166272609) (ç¼–å· 6)

å¸Œæœ›è¿™äº›ä¿¡æ¯å¯¹æ‚¨æœ‰å¸®åŠ©ã€‚ğŸ‘

\-
\[1]: [kubernetes Local PVåŸºæœ¬ä½¿ç”¨ä»¥åŠåŸç† - ä¸ªäººæ–‡ç«  - SegmentFault æ€å¦](https://segmentfault.com/a/1190000040882124)
\[2]: [æŒä¹…å· | Kubernetes](https://kubernetes.io/zh/docs/concepts/storage/persistent-volumes/)
\[3]: [kuberneteså­˜å‚¨ç±»ä¸PVä¸PVCå…³ç³»åŠå®è·µ - fat_girl_spring - åšå®¢å›­](https://www.cnblogs.com/fat-girl-spring/p/14545547.html)
\[4]: [Kubernetesä¸­çš„PVå’ŒPVCåˆ†æä¸ä½¿ç”¨ - è…¾è®¯äº‘å¼€å‘è€…ç¤¾åŒº-è…¾è®¯äº‘](https://cloud.tencent.com/developer/article/1857710)
\[5]: [é…ç½® Pod ä»¥ä½¿ç”¨ PersistentVolume ä½œä¸ºå­˜å‚¨ | Kubernetes](https://kubernetes.io/zh/docs/tasks/configure-pod-container/configure-persistent-volume-storage/)
\[6]: [Kubernetes PV å’Œ PVC ç»‘å®šæµç¨‹åŠé¢„ç»‘å®š (Pre-Binding) - çŸ¥ä¹](https://zhuanlan.zhihu.com/p/166272609)

<hr/>

Question:

ä½ å¯ä»¥é€šè¿‡ç±»æ¯”çš„æ–¹æ³•ï¼Œè§£é‡Šä¸€ä¸‹å—ï¼Ÿ

Answer:

å¥½çš„ï¼Œæˆ‘å¯ä»¥å°è¯•ç”¨ç±»æ¯”çš„æ–¹æ³•æ¥è§£é‡Šä¸€ä¸‹ pv å’Œ pod çš„å…³ç³»ã€‚

æ‚¨å¯ä»¥æŠŠ pv æƒ³è±¡æˆä¸€ä¸ªåœè½¦åœºï¼Œå®ƒæœ‰å¾ˆå¤šè½¦ä½ï¼Œæ¯ä¸ªè½¦ä½éƒ½æœ‰ä¸€ä¸ªç¼–å·å’Œä¸€ä¸ªå¤§å°ã€‚pv æ˜¯é›†ç¾¤èµ„æºï¼Œå°±åƒåœè½¦åœºæ˜¯å…¬å…±èµ„æºä¸€æ ·ã€‚pv çš„ç”Ÿå‘½å‘¨æœŸè·Ÿä½¿ç”¨å®ƒä»¬çš„ pod æ—¶ç›¸äº’ç‹¬ç«‹ï¼Œå°±åƒè½¦ä½çš„å­˜åœ¨è·Ÿåœè½¦çš„æ—¶é—´æ²¡æœ‰å…³ç³»ä¸€æ ·ã€‚

æ‚¨å¯ä»¥æŠŠ pvc æƒ³è±¡æˆä¸€ä¸ªåœè½¦åˆ¸ï¼Œå®ƒæ˜¯ç”¨æˆ·å¯¹åœè½¦çš„è¯·æ±‚ï¼Œå®ƒæœ‰ä¸€ä¸ªç¼–å·å’Œä¸€ä¸ªå¤§å°ã€‚pvc æ˜¯ç”¨æˆ·èµ„æºï¼Œå°±åƒåœè½¦åˆ¸æ˜¯ä¸ªäººèµ„æºä¸€æ ·ã€‚pod è¦ä½¿ç”¨ pvï¼Œéœ€è¦é€šè¿‡ pvc æ¥è¯·æ±‚ï¼Œå°±åƒè¦åœè½¦ï¼Œéœ€è¦é€šè¿‡åœè½¦åˆ¸æ¥ç”³è¯·ä¸€ä¸ªè½¦ä½ä¸€æ ·ã€‚

æ‚¨å¯ä»¥æŠŠ pod æƒ³è±¡æˆä¸€è¾†æ±½è½¦ï¼Œå®ƒæ˜¯ä¸€ä¸ªè¿è¡Œåœ¨èŠ‚ç‚¹ä¸Šçš„å®¹å™¨ç»„ï¼Œå®ƒæœ‰ä¸€ä¸ªç¼–å·å’Œä¸€ä¸ªå¤§å°ã€‚pod æ˜¯èŠ‚ç‚¹èµ„æºï¼Œå°±åƒæ±½è½¦æ˜¯ç§äººèµ„æºä¸€æ ·ã€‚pod å¯ä»¥æŒ‡å®š pvc æ¥æ¶ˆè´¹ä¸ä¹‹ç»‘å®šçš„ pvï¼Œå°±åƒæ±½è½¦å¯ä»¥æ ¹æ®åœè½¦åˆ¸æ¥åœåœ¨æŒ‡å®šçš„è½¦ä½ä¸Šä¸€æ ·ã€‚

ä¸åŒç±»å‹çš„ pv å¯ä»¥ç±»æ¯”ä¸ºä¸åŒç±»å‹çš„åœè½¦åœºï¼Œæ¯”å¦‚ local ç±»å‹çš„ pv åªèƒ½è¢«åŒä¸€ä¸ªèŠ‚ç‚¹ä¸Šçš„ pod ä½¿ç”¨ï¼Œå°±åƒæŸäº›åœè½¦åœºåªèƒ½ç»™ç‰¹å®šåŒºåŸŸçš„æ±½è½¦æä¾›æœåŠ¡ä¸€æ ·ã€‚è€Œ nfs ç±»å‹çš„ pv å¯ä»¥è¢«ä¸åŒèŠ‚ç‚¹ä¸Šçš„ pod ä½¿ç”¨ï¼Œå°±åƒæŸäº›åœè½¦åœºå¯ä»¥ç»™ä»»ä½•åœ°æ–¹çš„æ±½è½¦æä¾›æœåŠ¡ä¸€æ ·ã€‚

å­˜å‚¨ç±»å¯ä»¥ç±»æ¯”ä¸ºä¸åŒç±»å‹çš„åœè½¦åˆ¸ï¼Œæ¯”å¦‚åŠ¨æ€åˆ†é…å’Œå›æ”¶ç­–ç•¥ï¼Œå°±åƒæŸäº›åœè½¦åˆ¸å¯ä»¥æ ¹æ®éœ€æ±‚è‡ªåŠ¨åˆ†é…å’Œå›æ”¶è½¦ä½ä¸€æ ·ã€‚

è¿™æ˜¯æˆ‘ç”¨ç±»æ¯”çš„æ–¹æ³•æ¥è§£é‡Š pv å’Œ pod çš„å…³ç³»ï¼Œå¸Œæœ›æ‚¨èƒ½ç†è§£ã€‚ğŸ˜Š


<hr/>

Question:

ä¸Šæ–‡ä¸­"nfs ç±»å‹çš„ pv å¯ä»¥è¢«ä¸åŒèŠ‚ç‚¹ä¸Šçš„ pod ä½¿ç”¨"çš„nfsæ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ

Answer:

åœ¨è¿™ä¸ªä¸Šä¸‹æ–‡ä¸­ï¼Œnfs æŒ‡çš„æ˜¯ Network File Systemï¼Œä¸€ç§åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿåè®®ï¼Œå…è®¸å®¢æˆ·ç«¯é€šè¿‡ç½‘ç»œè®¿é—®æœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶[^3^ã€‚nfs ç±»å‹çš„ pv æ˜¯ä¸€ç§ä½¿ç”¨ nfs åè®®æ¥æä¾›å­˜å‚¨æœåŠ¡çš„ pvï¼Œå®ƒå¯ä»¥è¢«ä¸åŒèŠ‚ç‚¹ä¸Šçš„ pod ä½¿ç”¨ï¼Œå› ä¸ºå®ƒä¸ä¾èµ–äºæœ¬åœ°ç£ç›˜æˆ–è®¾å¤‡ã€‚æ‚¨å¯ä»¥å‚è€ƒä»¥ä¸‹ç½‘å€äº†è§£æ›´å¤šå…³äº nfs ç±»å‹çš„ pv çš„ä¿¡æ¯ï¼š

- [NFS æŒä¹…å· | Kubernetes](https://kubernetes.io/zh/docs/concepts/storage/volumes/#nfs) (ç¼–å· 4)
- [Kubernetes NFS PV/PVC é…ç½® - ç®€ä¹¦](https://www.jianshu.com/p/7a9c0f0d8f8b) (ç¼–å· 5)
- [Kubernetes NFS æŒä¹…åŒ–å­˜å‚¨ - çŸ¥ä¹](https://zhuanlan.zhihu.com/p/142897111) (ç¼–å· 6)

å¸Œæœ›è¿™äº›ä¿¡æ¯å¯¹æ‚¨æœ‰å¸®åŠ©ã€‚ğŸ‘


<hr/>

Question:

pvã€pvcã€storage class

Answer:

æ‚¨çš„è¾“å…¥æ˜¯ï¼špvã€pvcã€storage class

è¿™äº›æ˜¯ Kubernetes ä¸­çš„ä¸€äº›å­˜å‚¨ç›¸å…³çš„æ¦‚å¿µï¼Œç®€å•æ¥è¯´ï¼š

- pv æ˜¯ persistent volume çš„ç¼©å†™ï¼Œè¡¨ç¤ºæŒä¹…åŒ–å­˜å‚¨å·ï¼Œå®ƒæ˜¯é›†ç¾¤ä¸­çš„ä¸€ç§èµ„æºï¼Œå¯ä»¥æä¾›ç»™ pod ä½¿ç”¨ï¼Œå®ƒæœ‰è‡ªå·±çš„ç”Ÿå‘½å‘¨æœŸå’Œå±æ€§ï¼Œæ¯”å¦‚å¤§å°ã€ç±»å‹ã€è®¿é—®æ¨¡å¼ç­‰<sup>4</sup>ã€‚
- pvc æ˜¯ persistent volume claim çš„ç¼©å†™ï¼Œè¡¨ç¤ºæŒä¹…åŒ–å­˜å‚¨å·ç”³è¯·ï¼Œå®ƒæ˜¯ç”¨æˆ·å¯¹å­˜å‚¨çš„è¯·æ±‚ï¼Œå®ƒå¯ä»¥æŒ‡å®šæ‰€éœ€çš„å­˜å‚¨å¤§å°ã€ç±»å‹ã€è®¿é—®æ¨¡å¼ç­‰ï¼Œå¹¶ä¸”å¯ä»¥åŠ¨æ€åœ°ç»‘å®šåˆ°åˆé€‚çš„ pv ä¸Š<sup>4</sup>ã€‚
- storage class æ˜¯ storage class çš„ç¼©å†™ï¼Œè¡¨ç¤ºå­˜å‚¨ç±»ï¼Œå®ƒæ˜¯ä¸€ç§æŠ½è±¡çš„å­˜å‚¨æä¾›è€…ï¼Œå®ƒå¯ä»¥å®šä¹‰ä¸åŒçš„å­˜å‚¨ç‰¹æ€§å’Œç­–ç•¥ï¼Œæ¯”å¦‚åŠ¨æ€åˆ†é…ã€å›æ”¶ã€å¿«ç…§ç­‰ï¼Œå¹¶ä¸”å¯ä»¥è¢« pvc å¼•ç”¨æ¥åŠ¨æ€åœ°åˆ›å»º pv<sup>2</sup>ã€‚

æ‚¨å¯ä»¥å‚è€ƒä»¥ä¸‹ç½‘å€äº†è§£æ›´å¤šå…³äºè¿™äº›æ¦‚å¿µçš„ä¿¡æ¯ï¼š

- [Kubernetes â€” Storage Overview â€” PV, PVC and Storage Class](https://medium.com/devops-mojo/kubernetes-storage-options-overview-persistent-volumes-pv-claims-pvc-and-storageclass-sc-k8s-storage-df71ca0fccc3) (ç¼–å· 2)
- [Persistent Volumes | Kubernetes](https://kubernetes.io/docs/concepts/storage/persistent-volumes/) (ç¼–å· 4)
- [Create a persistent volume with Azure Disks in Azure Kubernetes Service ...](https://learn.microsoft.com/en-us/azure/aks/azure-csi-disk-storage-provision) (ç¼–å· 3)

å¸Œæœ›è¿™äº›ä¿¡æ¯å¯¹æ‚¨æœ‰å¸®åŠ©ã€‚ğŸ˜Š

\-
\[1]: [Persistent Volumes | Kubernetes](https://kubernetes.io/docs/concepts/storage/persistent-volumes/)
\[2]: [Kubernetes â€” Storage Overview â€” PV, PVC and Storage Class](https://medium.com/devops-mojo/kubernetes-storage-options-overview-persistent-volumes-pv-claims-pvc-and-storageclass-sc-k8s-storage-df71ca0fccc3)
\[3]: [Configuring storage classes, PVCs and pods - IBM](https://www.ibm.com/docs/en/SSCKLT_2.0.0/UG/sec_ug_config_storage_class_pvc_file.html)
\[4]: [Create a persistent volume with Azure Disks in Azure Kubernetes Service ...](https://learn.microsoft.com/en-us/azure/aks/azure-csi-disk-storage-provision)

<hr/>

Question:

pvã€pvcã€storage classä¹‹é—´çš„å…³ç³»æ˜¯ä»€ä¹ˆï¼Ÿå…·ä½“åº”è¯¥æ€ä¹ˆä½¿ç”¨è¿™ä¸‰ç§èµ„æº

Answer:

æ‚¨çš„è¾“å…¥æ˜¯ï¼špvã€pvcã€storage classä¹‹é—´çš„å…³ç³»æ˜¯ä»€ä¹ˆï¼Ÿå…·ä½“åº”è¯¥æ€ä¹ˆä½¿ç”¨è¿™ä¸‰ç§èµ„æº

è¿™äº›èµ„æºä¹‹é—´çš„å…³ç³»å¯ä»¥ç”¨ä»¥ä¸‹çš„å›¾ç¤ºæ¥è¯´æ˜ï¼š

![pv-pvc-sc](https://miro.medium.com/max/1400/1*4fX9x7n9ZtQY1jD5gq3w7w.png)

- storage class æ˜¯ä¸€ç§å®šä¹‰å­˜å‚¨ç‰¹æ€§å’Œç­–ç•¥çš„å¯¹è±¡ï¼Œå®ƒå¯ä»¥è¢« pvc å¼•ç”¨æ¥åŠ¨æ€åœ°åˆ›å»º pv<sup>2</sup>ã€‚
- pvc æ˜¯ä¸€ç§è¯·æ±‚å­˜å‚¨çš„å¯¹è±¡ï¼Œå®ƒå¯ä»¥æŒ‡å®šæ‰€éœ€çš„å­˜å‚¨å¤§å°ã€ç±»å‹ã€è®¿é—®æ¨¡å¼ç­‰ï¼Œå¹¶ä¸”å¯ä»¥åŠ¨æ€åœ°ç»‘å®šåˆ°åˆé€‚çš„ pv ä¸Š<sup>4</sup>ã€‚
- pv æ˜¯ä¸€ç§æä¾›å­˜å‚¨çš„å¯¹è±¡ï¼Œå®ƒæ˜¯é›†ç¾¤ä¸­çš„ä¸€ç§èµ„æºï¼Œå¯ä»¥æä¾›ç»™ pod ä½¿ç”¨ï¼Œå®ƒæœ‰è‡ªå·±çš„ç”Ÿå‘½å‘¨æœŸå’Œå±æ€§ï¼Œæ¯”å¦‚å¤§å°ã€ç±»å‹ã€è®¿é—®æ¨¡å¼ç­‰<sup>4</sup>ã€‚

å…·ä½“ä½¿ç”¨è¿™ä¸‰ç§èµ„æºçš„æ­¥éª¤å¦‚ä¸‹ï¼š

- é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ª storage class å¯¹è±¡ï¼Œå®šä¹‰å­˜å‚¨æä¾›è€…å’Œç‰¹æ€§<sup>2</sup>ã€‚ä¾‹å¦‚ï¼š

```yaml
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  name: standard
provisioner: kubernetes.io/azure-disk
parameters:
  storageaccounttype: Standard_LRS
  kind: Managed
reclaimPolicy: Delete
volumeBindingMode: Immediate
```

- ç„¶åï¼Œåˆ›å»ºä¸€ä¸ª pvc å¯¹è±¡ï¼ŒæŒ‡å®šæ‰€éœ€çš„å­˜å‚¨å¤§å°ã€ç±»å‹ã€è®¿é—®æ¨¡å¼ç­‰ï¼Œå¹¶å¼•ç”¨ storage class å¯¹è±¡<sup>3</sup>ã€‚ä¾‹å¦‚ï¼š

```yaml
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: azure-managed-disk
spec:
  accessModes:
  - ReadWriteOnce
  storageClassName: standard
  resources:
    requests:
      storage: 5Gi
```

- æœ€åï¼Œåˆ›å»ºä¸€ä¸ª pod å¯¹è±¡ï¼Œä½¿ç”¨ pvc å¯¹è±¡ä½œä¸ºå…¶å­˜å‚¨å·<sup>3</sup>ã€‚ä¾‹å¦‚ï¼š

```yaml
apiVersion: v1
kind: Pod
metadata:
  name: mypod
spec:
  containers:
    - name: mypod
      image: nginx
      volumeMounts:
      - mountPath: "/mnt/azure"
        name: volume
  volumes:
    - name: volume
      persistentVolumeClaim:
        claimName: azure-managed-disk
```

æ‚¨å¯ä»¥å‚è€ƒä»¥ä¸‹ç½‘å€äº†è§£æ›´å¤šå…³äºè¿™äº›èµ„æºçš„ä¿¡æ¯ï¼š

- [PersistentVolume, PersistentVolumeClaim, and StorageClass - HUAWEI CLOUD](https://support.huaweicloud.com/intl/en-us/basics-cce/kubernetes_0030.html) (ç¼–å· 1)
- [Kubernetes â€” Storage Overview â€” PV, PVC and Storage Class](https://medium.com/devops-mojo/kubernetes-storage-options-overview-persistent-volumes-pv-claims-pvc-and-storageclass-sc-k8s-storage-df71ca0fccc3) (ç¼–å· 2)
- [Create a persistent volume with Azure Disks in Azure Kubernetes Service ...](https://learn.microsoft.com/en-us/azure/aks/azure-csi-disk-storage-provision) (ç¼–å· 3)
- [Persistent Volumes | Kubernetes](https://kubernetes.io/docs/concepts/storage/persistent-volumes/) (ç¼–å· 4)

å¸Œæœ›è¿™äº›ä¿¡æ¯å¯¹æ‚¨æœ‰å¸®åŠ©ã€‚ğŸ˜Š


\-
\[1]: [Kubernetes â€” Storage Overview â€” PV, PVC and Storage Class](https://medium.com/devops-mojo/kubernetes-storage-options-overview-persistent-volumes-pv-claims-pvc-and-storageclass-sc-k8s-storage-df71ca0fccc3)
\[2]: [Persistent Volumes | Kubernetes](https://kubernetes.io/docs/concepts/storage/persistent-volumes/)
\[3]: [Kubernetes storage basics: PV, PVC and StorageClass - MayaData](https://blog.mayadata.io/kubernetes-storage-basics-pv-pvc-and-storageclass)
\[4]: [PersistentVolume, PersistentVolumeClaim, and StorageClass - HUAWEI CLOUD](https://support.huaweicloud.com/intl/en-us/basics-cce/kubernetes_0030.html)

<hr/>

