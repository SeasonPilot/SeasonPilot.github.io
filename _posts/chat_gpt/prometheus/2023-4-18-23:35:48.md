Question:

Reply in Chinese (Simplified).
The following is a search input in a search engine, giving useful content or solutions and as much information as you can related to it, use markdown syntax to make your answer more readable, such as code blocks, bold, list:
è¯·ä»”ç»†æ€è€ƒï¼Œåœ¨Prometheusç›‘æ§é¢†åŸŸï¼ŒæŒ‡æ ‡ é‡‡æ ·ç‡ã€é‡‡é›†é—´éš” åˆ†åˆ«æ˜¯åœ¨å“ªé‡Œè¿›è¡Œè®¾ç½®ï¼Ÿ

Answer:

æ‚¨å¥½ï¼Œè¿™æ˜¯Bingã€‚æˆ‘å¯ä»¥å¸®æ‚¨å›ç­”è¿™ä¸ªé—®é¢˜ã€‚ğŸ˜Š

Prometheusç›‘æ§é¢†åŸŸï¼ŒæŒ‡æ ‡é‡‡æ ·ç‡å’Œé‡‡é›†é—´éš”åˆ†åˆ«æ˜¯åœ¨å“ªé‡Œè¿›è¡Œè®¾ç½®ï¼Ÿè¿™å–å†³äºæ‚¨æ˜¯ä½¿ç”¨Prometheus Serverè¿˜æ˜¯Prometheus Clientæ¥æ”¶é›†å’Œæš´éœ²æŒ‡æ ‡æ•°æ®ã€‚

å¦‚æœæ‚¨æ˜¯ä½¿ç”¨Prometheus Serverï¼Œé‚£ä¹ˆæ‚¨å¯ä»¥åœ¨å…¨å±€é…ç½®æ–‡ä»¶ä¸­è®¾ç½®**scrape_interval**å’Œ**scrape_timeout**ä¸¤ä¸ªå‚æ•°ï¼Œåˆ†åˆ«è¡¨ç¤ºæŠ“å–ç›®æ ‡çš„é—´éš”æ—¶é—´å’Œè¶…æ—¶æ—¶é—´ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œscrape_intervalæ˜¯1åˆ†é’Ÿï¼Œscrape_timeoutæ˜¯10ç§’ã€‚

å¦‚æœæ‚¨æ˜¯ä½¿ç”¨Prometheus Clientï¼Œé‚£ä¹ˆæ‚¨å¯ä»¥åœ¨ä»£ç ä¸­è®¾ç½®**metrics**çš„é‡‡æ ·ç‡ï¼Œä¹Ÿå°±æ˜¯æ¯æ¬¡æ”¶é›†æ•°æ®çš„æ¦‚ç‡ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨æƒ³è¦æ¯10æ¬¡è¯·æ±‚ä¸­åªæ”¶é›†ä¸€æ¬¡æ•°æ®ï¼Œé‚£ä¹ˆæ‚¨å¯ä»¥è®¾ç½®metricsçš„é‡‡æ ·ç‡ä¸º0.1ã€‚

è¯·é—®æ‚¨æ˜¯æƒ³è¦äº†è§£æ›´å¤šå…³äºPrometheusç›‘æ§çš„åŸºç¡€æ¦‚å¿µå’ŒåŸç†å—ï¼Ÿè¿˜æ˜¯æƒ³è¦å…·ä½“çš„é…ç½®å’Œä½¿ç”¨æ–¹æ³•å‘¢ï¼Ÿ


<hr/>

Question:

è¯·ä»”ç»†æ€è€ƒä¸‹ï¼ŒPrometheus Client å¦‚ä½•è®¾ç½® metrics é‡‡æ ·ç‡ï¼Œå¹¶ä¸¾ä¾‹è¯´æ˜

Answer:

Prometheus Clientå¦‚ä½•è®¾ç½®metricsé‡‡æ ·ç‡ï¼Œè¿™å–å†³äºæ‚¨ä½¿ç”¨çš„æ˜¯å“ªç§è¯­è¨€çš„å®¢æˆ·ç«¯åº“ã€‚ä¸åŒçš„è¯­è¨€å¯èƒ½æœ‰ä¸åŒçš„æ–¹æ³•å’Œå‚æ•°æ¥è®¾ç½®metricsçš„é‡‡æ ·ç‡ï¼Œä¹Ÿå°±æ˜¯æ¯æ¬¡æ”¶é›†æ•°æ®çš„æ¦‚ç‡ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯Pythonè¯­è¨€ï¼Œé‚£ä¹ˆæ‚¨å¯ä»¥ä½¿ç”¨prometheus_clientæ¨¡å— ï¼Œå¹¶åœ¨å®šä¹‰metricsæ—¶ä¼ å…¥ä¸€ä¸ª**sample_rate**å‚æ•°ï¼Œè¡¨ç¤ºé‡‡æ ·ç‡ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨æƒ³è¦æ¯10æ¬¡è¯·æ±‚ä¸­åªæ”¶é›†ä¸€æ¬¡æ•°æ®ï¼Œé‚£ä¹ˆæ‚¨å¯ä»¥è¿™æ ·å†™ï¼š

```python
from prometheus_client import Summary
# Create a metric to track time spent and requests made.
REQUEST_TIME = Summary('request_processing_seconds', 'Time spent processing request', sample_rate=0.1)
```

è¿™æ ·ï¼Œå½“Prometheusä»æ‚¨çš„åº”ç”¨ç¨‹åºçš„HTTPç«¯ç‚¹æŠ“å–æ•°æ®æ—¶ï¼Œå®¢æˆ·ç«¯åº“ä¼šæ ¹æ®é‡‡æ ·ç‡å‘é€å½“å‰çŠ¶æ€çš„æ‰€æœ‰è·Ÿè¸ªmetricsåˆ°æœåŠ¡å™¨ã€‚è¯·é—®æ‚¨è¿˜æœ‰å…¶ä»–é—®é¢˜å—ï¼ŸğŸ˜Š


<hr/>

Question:

è¯·ä»”ç»†æ€è€ƒä¸‹ï¼Œgo è¯­è¨€ Prometheus Client å¦‚ä½•è®¾ç½® metrics é‡‡æ ·ç‡ï¼Œå¹¶ä¸¾ä¾‹è¯´æ˜

Answer:

Goè¯­è¨€çš„Prometheus Clientå¦‚ä½•è®¾ç½®metricsé‡‡æ ·ç‡ï¼Œè¿™ä¹Ÿå–å†³äºæ‚¨ä½¿ç”¨çš„æ˜¯å“ªç§ç±»å‹çš„metricsã€‚Prometheusæ”¯æŒå››ç§æ ¸å¿ƒçš„metricsç±»å‹ï¼Œåˆ†åˆ«æ˜¯Counterï¼ˆè®¡æ•°å™¨ï¼‰ï¼ŒGaugeï¼ˆä»ªè¡¨ç›˜ï¼‰ï¼ŒHistogramï¼ˆç›´æ–¹å›¾ï¼‰å’ŒSummaryï¼ˆæ‘˜è¦ï¼‰ã€‚ä¸åŒçš„metricsç±»å‹å¯èƒ½æœ‰ä¸åŒçš„æ–¹æ³•å’Œå‚æ•°æ¥è®¾ç½®é‡‡æ ·ç‡ï¼Œä¹Ÿå°±æ˜¯æ¯æ¬¡æ”¶é›†æ•°æ®çš„æ¦‚ç‡ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯Histogramç±»å‹çš„metricsï¼Œé‚£ä¹ˆæ‚¨å¯ä»¥ä½¿ç”¨prometheus/client_golangæ¨¡å—ï¼Œå¹¶åœ¨å®šä¹‰metricsæ—¶ä¼ å…¥ä¸€ä¸ª**Objectives**å‚æ•°ï¼Œè¡¨ç¤ºé‡‡æ ·ç‡ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨æƒ³è¦æ¯10æ¬¡è¯·æ±‚ä¸­åªæ”¶é›†ä¸€æ¬¡æ•°æ®ï¼Œé‚£ä¹ˆæ‚¨å¯ä»¥è¿™æ ·å†™ï¼š

```go
import "github.com/prometheus/client_golang/prometheus"
// Create a metric to track time spent and requests made.
var requestDuration = prometheus.NewHistogram(prometheus.HistogramOpts{
    Name: "request_duration_seconds",
    Help: "Time spent processing request",
    Objectives: map[float64]float64{0.1: 0.1}, // 10% of requests will be sampled
})
```

è¿™æ ·ï¼Œå½“Prometheusä»æ‚¨çš„åº”ç”¨ç¨‹åºçš„HTTPç«¯ç‚¹æŠ“å–æ•°æ®æ—¶ï¼Œå®¢æˆ·ç«¯åº“ä¼šæ ¹æ®é‡‡æ ·ç‡å‘é€å½“å‰çŠ¶æ€çš„æ‰€æœ‰è·Ÿè¸ªmetricsåˆ°æœåŠ¡å™¨ã€‚è¯·é—®æ‚¨è¿˜æœ‰å…¶ä»–é—®é¢˜å—ï¼ŸğŸ˜Š


<hr/>

Question:

æ²¡æœ‰ Objectives å­—æ®µ

Answer:

æŠ±æ­‰ï¼Œæˆ‘å¯èƒ½ç†è§£é”™äº†æ‚¨çš„é—®é¢˜ã€‚å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯Summaryç±»å‹çš„metricsï¼Œé‚£ä¹ˆæ‚¨å¯ä»¥ä½¿ç”¨**MaxAge**å’Œ**AgeBuckets**å‚æ•°æ¥è®¾ç½®é‡‡æ ·ç‡[^3^ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨æƒ³è¦æ¯10ç§’é’Ÿæ”¶é›†ä¸€æ¬¡æ•°æ®ï¼Œé‚£ä¹ˆæ‚¨å¯ä»¥è¿™æ ·å†™ï¼š

```go
import "github.com/prometheus/client_golang/prometheus"
// Create a metric to track time spent and requests made.
var requestDuration = prometheus.NewSummary(prometheus.SummaryOpts{
    Name: "request_duration_seconds",
    Help: "Time spent processing request",
    MaxAge: 10 * time.Second, // Only keep samples for 10 seconds
    AgeBuckets: 1, // Only keep one bucket
})
```

è¿™æ ·ï¼Œå½“Prometheusä»æ‚¨çš„åº”ç”¨ç¨‹åºçš„HTTPç«¯ç‚¹æŠ“å–æ•°æ®æ—¶ï¼Œå®¢æˆ·ç«¯åº“ä¼šæ ¹æ®é‡‡æ ·ç‡å‘é€å½“å‰çŠ¶æ€çš„æ‰€æœ‰è·Ÿè¸ªmetricsåˆ°æœåŠ¡å™¨[^1^ã€‚è¯·é—®æ‚¨è¿˜æœ‰å…¶ä»–é—®é¢˜å—ï¼ŸğŸ˜Š


<hr/>

