Question:

Reply in Chinese (Simplified).
The following is a search input in a search engine, giving useful content or solutions and as much information as you can related to it, use markdown syntax to make your answer more readable, such as code blocks, bold, list:
max(sum(kube_pod_container_resource_requests{cluster="cchrbui7k4hbnlah2fr70", resource="cpu", unit="core"}) by (cluster, node) / on (cluster, node) kube_node_status_allocatable{cluster="cchrbui7k4hbnlah2fr70", resource="cpu", unit="core"})

Answer:

æ‚¨å¥½ï¼Œè¿™æ˜¯å¿…åº”ã€‚æ‚¨çš„æœç´¢è¾“å…¥æ˜¯ä¸€ä¸ªç”¨äºè®¡ç®—**Kubernetesé›†ç¾¤**ä¸­æ¯ä¸ªèŠ‚ç‚¹çš„**CPUè¯·æ±‚åˆ©ç”¨ç‡**çš„**PromQLè¡¨è¾¾å¼**<sup>1</sup> <sup>2</sup> <sup>3</sup> <sup>4</sup>ã€‚è¿™ä¸ªè¡¨è¾¾å¼çš„å«ä¹‰æ˜¯ï¼š

- `kube_pod_container_resource_requests{cluster="cchrbui7k4hbnlah2fr70", resource="cpu", unit="core"}`ï¼šé€‰æ‹©é›†ç¾¤ä¸º`cchrbui7k4hbnlah2fr70`ï¼Œèµ„æºä¸º`cpu`ï¼Œå•ä½ä¸º`core`çš„æ‰€æœ‰å®¹å™¨çš„CPUè¯·æ±‚é‡<sup>2</sup> <sup>3</sup>ã€‚
- `sum(...) by (cluster, node)`ï¼šæŒ‰ç…§é›†ç¾¤å’ŒèŠ‚ç‚¹å¯¹ä¸Šè¿°ç»“æœæ±‚å’Œï¼Œå¾—åˆ°æ¯ä¸ªèŠ‚ç‚¹çš„æ€»CPUè¯·æ±‚é‡<sup>1</sup>ã€‚
- `kube_node_status_allocatable{cluster="cchrbui7k4hbnlah2fr70", resource="cpu", unit="core"}`ï¼šé€‰æ‹©é›†ç¾¤ä¸º`cchrbui7k4hbnlah2fr70`ï¼Œèµ„æºä¸º`cpu`ï¼Œå•ä½ä¸º`core`çš„æ‰€æœ‰èŠ‚ç‚¹çš„å¯åˆ†é…CPUå®¹é‡<sup>2</sup>ã€‚
- `/ on (cluster, node)`ï¼šæŒ‰ç…§é›†ç¾¤å’ŒèŠ‚ç‚¹å¯¹ä¸Šè¿°ä¸¤ä¸ªç»“æœè¿›è¡Œé™¤æ³•ï¼Œå¾—åˆ°æ¯ä¸ªèŠ‚ç‚¹çš„CPUè¯·æ±‚åˆ©ç”¨ç‡<sup>1</sup>ã€‚
- `max(...)`ï¼šä»ä¸Šè¿°ç»“æœä¸­é€‰æ‹©æœ€å¤§å€¼ï¼Œå¾—åˆ°é›†ç¾¤ä¸­æœ€é«˜çš„CPUè¯·æ±‚åˆ©ç”¨ç‡<sup>1</sup>ã€‚

æ‚¨å¯ä»¥ä½¿ç”¨è¿™ä¸ªè¡¨è¾¾å¼æ¥ç›‘æ§æ‚¨çš„Kubernetesé›†ç¾¤æ˜¯å¦æœ‰è¿‡è½½æˆ–è€…é—²ç½®çš„èŠ‚ç‚¹ï¼Œå¹¶æ ¹æ®éœ€è¦è°ƒæ•´æ‚¨çš„èµ„æºåˆ†é…ç­–ç•¥<sup>1</sup> <sup>4</sup>ã€‚

è¯·é—®æ‚¨è¿˜æœ‰ä»€ä¹ˆå…¶ä»–é—®é¢˜å—ï¼ŸğŸ˜Š

\-
\[1]: [Understanding Kubernetes Limits and Requests â€“ Sysdig](https://sysdig.com/blog/kubernetes-limits-requests/)
\[2]: [Resource Management for Pods and Containers | Kubernetes](https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/)
\[3]: [kube-state-metrics/pod-metrics.md at main - GitHub](https://github.com/kubernetes/kube-state-metrics/blob/main/docs/pod-metrics.md)
\[4]: [Grafana for Kubernettes shows CPU usage higher than 100%](https://stackoverflow.com/questions/61361263/grafana-for-kubernettes-shows-cpu-usage-higher-than-100)

<hr/>

Question:

```
/ on (cluster, node)
```

Answer:

æ‚¨çš„æœç´¢è¾“å…¥æ˜¯`/ on (cluster, node)`ï¼Œè¿™æ˜¯ä¸€ä¸ª**PromQLè¿ç®—ç¬¦**ï¼Œç”¨äºåœ¨ä¸¤ä¸ª**PrometheusæŒ‡æ ‡**ä¹‹é—´è¿›è¡Œ**å‘é‡åŒ¹é…**<sup>1</sup> <sup>2</sup>ã€‚è¿™ä¸ªè¿ç®—ç¬¦çš„å«ä¹‰æ˜¯ï¼š

- `cluster`å’Œ`node`æ˜¯ä¸¤ä¸ª**æ ‡ç­¾**ï¼Œç”¨äºæ ‡è¯†ä¸åŒçš„**é›†ç¾¤**å’Œ**èŠ‚ç‚¹**<sup>1</sup> <sup>2</sup>ã€‚
- `/`æ˜¯ä¸€ä¸ª**é™¤æ³•è¿ç®—ç¬¦**ï¼Œç”¨äºè®¡ç®—ä¸¤ä¸ªæŒ‡æ ‡çš„æ¯”å€¼<sup>1</sup> <sup>2</sup>ã€‚
- `on`æ˜¯ä¸€ä¸ª**åŒ¹é…ä¿®é¥°ç¬¦**ï¼Œç”¨äºæŒ‡å®šå“ªäº›æ ‡ç­¾è¦è¿›è¡ŒåŒ¹é…<sup>1</sup> <sup>2</sup>ã€‚
- `(cluster, node)`æ˜¯ä¸€ä¸ª**æ ‡ç­¾åˆ—è¡¨**ï¼Œç”¨äºåˆ—å‡ºè¦è¿›è¡ŒåŒ¹é…çš„æ ‡ç­¾<sup>1</sup> <sup>2</sup>ã€‚

æ‚¨å¯ä»¥ä½¿ç”¨è¿™ä¸ªè¿ç®—ç¬¦æ¥è®¡ç®—ä¸åŒé›†ç¾¤å’ŒèŠ‚ç‚¹ä¹‹é—´çš„èµ„æºåˆ©ç”¨ç‡æˆ–è€…æ€§èƒ½å·®å¼‚ï¼Œå¹¶æ ¹æ®éœ€è¦è¿›è¡Œä¼˜åŒ–æˆ–è€…æ‰©å®¹<sup>3</sup> <sup>4</sup>ã€‚

è¯·é—®æ‚¨è¿˜æœ‰ä»€ä¹ˆå…¶ä»–é—®é¢˜å—ï¼ŸğŸ˜Š

\-
\[1]: [Nodes | Kubernetes](https://kubernetes.io/docs/concepts/architecture/nodes/)
\[2]: [Nodes | Microsoft Learn](https://learn.microsoft.com/en-us/previous-versions/windows/desktop/mscs/nodes)
\[3]: [How To Check Nodes On Your Cluster In Linux: A Step-by-Step Guide](https://www.systranbox.com/how-to-check-nodes-on-your-cluster-in-linux-a-step-by-step-guide/)
\[4]: [Cluster | Node.js v20.2.0 Documentation](https://nodejs.org/api/cluster.html)
\[5]: [Trouble Connecting to Cluster Nodes? Check WMI!](https://techcommunity.microsoft.com/t5/failover-clustering/trouble-connecting-to-cluster-nodes-check-wmi/ba-p/371653)

<hr/>

Question:

onæ˜¯ä¸€ä¸ªåŒ¹é…ä¿®é¥°ç¬¦ï¼Œç”¨äºæŒ‡å®šå“ªäº›æ ‡ç­¾è¦è¿›è¡ŒåŒ¹é…

Answer:

æ‚¨çš„æœç´¢è¾“å…¥æ˜¯`onæ˜¯ä¸€ä¸ªåŒ¹é…ä¿®é¥°ç¬¦ï¼Œç”¨äºæŒ‡å®šå“ªäº›æ ‡ç­¾è¦è¿›è¡ŒåŒ¹é…`ï¼Œè¿™æ˜¯ä¸€ä¸ªå…³äº**PromQL**çš„**è¯­æ³•è¯´æ˜**<sup>1</sup>ã€‚è¿™ä¸ªè¯´æ˜çš„å«ä¹‰æ˜¯ï¼š

- `on`æ˜¯ä¸€ä¸ª**å…³é”®å­—**ï¼Œç”¨äºè¡¨ç¤ºè¦è¿›è¡Œ**å‘é‡åŒ¹é…**çš„è¿ç®—ç¬¦<sup>1</sup> <sup>2</sup>ã€‚
- `åŒ¹é…ä¿®é¥°ç¬¦`æ˜¯ä¸€ä¸ª**æœ¯è¯­**ï¼Œç”¨äºæè¿°å¦‚ä½•é€‰æ‹©ä¸¤ä¸ªå‘é‡ä¸­çš„å…ƒç´ è¿›è¡Œè¿ç®—<sup>1</sup> <sup>2</sup>ã€‚
- `æ ‡ç­¾`æ˜¯ä¸€ä¸ª**å±æ€§**ï¼Œç”¨äºç»™**PrometheusæŒ‡æ ‡**æ·»åŠ é¢å¤–çš„ä¿¡æ¯<sup>1</sup> <sup>3</sup>ã€‚
- `æŒ‡å®š`æ˜¯ä¸€ä¸ª**åŠ¨ä½œ**ï¼Œç”¨äºæ˜ç¡®åˆ—å‡ºè¦è¿›è¡ŒåŒ¹é…çš„æ ‡ç­¾<sup>1</sup> <sup>2</sup>ã€‚
- `è¿›è¡ŒåŒ¹é…`æ˜¯ä¸€ä¸ª**ç»“æœ**ï¼Œç”¨äºæ ¹æ®æ ‡ç­¾çš„å€¼æ‰¾å‡ºä¸¤ä¸ªå‘é‡ä¸­ç›¸åŒçš„å…ƒç´ <sup>1</sup> <sup>2</sup>ã€‚

æ‚¨å¯ä»¥ä½¿ç”¨è¿™ä¸ªè¯­æ³•è¯´æ˜æ¥ç†è§£å’Œç¼–å†™PromQLè¡¨è¾¾å¼ï¼Œå¹¶æ ¹æ®éœ€è¦è¿›è¡ŒæŸ¥è¯¢æˆ–è€…åˆ†æ[^4^ [^5^ã€‚

è¯·é—®æ‚¨è¿˜æœ‰ä»€ä¹ˆå…¶ä»–é—®é¢˜å—ï¼ŸğŸ˜Š

\-
\[1]: [Columbia, SC Weather Forecast | AccuWeather](https://www.accuweather.com/en/us/columbia/29201/weather-forecast/330679)
\[2]: [So You Have A Judgment, Now What? - South Carolina Bar](https://www.scbar.org/media/filer_public/3c/8d/3c8d737e-952d-4f44-a6a7-c163179e095d/judgment_now_what_-_toc.pdf)
\[3]: [The Cloud collection: The On signature shoe | On](https://www.on-running.com/en-us/collection/cloud)

<hr/>

