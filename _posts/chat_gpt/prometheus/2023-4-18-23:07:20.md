Question:

Reply in Chinese (Simplified).
The following is a search input in a search engine, giving useful content or solutions and as much information as you can related to it, use markdown syntax to make your answer more readable, such as code blocks, bold, list:
prometheus server scrape_interval è®¾ç½®ä¸º10s æ—¶ï¼Œprometheus server æ¯æ¬¡scrapeåˆ°çš„æ•°æ®æ˜¯è¿‡å» 10sçš„æ•°æ®å—ï¼Ÿ

Answer:

æ‚¨å¥½ï¼Œè¿™æ˜¯å¿…åº”ã€‚æˆ‘å¯ä»¥ç”¨ä¸­æ–‡å›ç­”æ‚¨çš„é—®é¢˜ã€‚ğŸ˜Š

æ ¹æ®æœç´¢ç»“æœ   ï¼Œprometheus server çš„ scrape_interval å‚æ•°æ˜¯æŒ‡å®š prometheus server ä»ç›®æ ‡åœ°å€è·å–æŒ‡æ ‡æ•°æ®çš„é¢‘ç‡ã€‚é»˜è®¤å€¼æ˜¯ 15 ç§’ï¼Œä¹Ÿå°±æ˜¯è¯´æ¯ 15 ç§’ prometheus server ä¼šä»ç›®æ ‡åœ°å€æŠ“å–ä¸€æ¬¡æ•°æ®ã€‚æ‚¨å¯ä»¥åœ¨ prometheus.yml æ–‡ä»¶ä¸­ä¿®æ”¹è¿™ä¸ªå‚æ•°ï¼Œæ¯”å¦‚è®¾ç½®ä¸º 10 ç§’ã€‚

prometheus server æ¯æ¬¡æŠ“å–åˆ°çš„æ•°æ®å¹¶ä¸ä¸€å®šæ˜¯è¿‡å» 10 ç§’çš„æ•°æ®ï¼Œè€Œæ˜¯ç›®æ ‡åœ°å€åœ¨æŠ“å–æ—¶åˆ»æä¾›çš„æœ€æ–°æ•°æ®ã€‚è¿™äº›æ•°æ®å¯èƒ½æœ‰ä¸€å®šçš„å»¶è¿Ÿï¼Œå–å†³äºç›®æ ‡åœ°å€çš„æ›´æ–°é¢‘ç‡å’Œç½‘ç»œçŠ¶å†µã€‚prometheus server ä¼šç»™æ¯ä¸ªæŠ“å–åˆ°çš„æ•°æ®æ·»åŠ ä¸€ä¸ªæ—¶é—´æˆ³ï¼Œè¡¨ç¤ºæŠ“å–çš„æ—¶åˆ»ï¼Œè€Œä¸æ˜¯æ•°æ®äº§ç”Ÿçš„æ—¶åˆ»ã€‚

å¦‚æœæ‚¨æƒ³äº†è§£æ›´å¤šå…³äº prometheus server çš„é…ç½®å’Œä½¿ç”¨ï¼Œè¯·å‚è€ƒä»¥ä¸‹é“¾æ¥ï¼š

- [Getting started | Prometheus](https://prometheus.io/docs/prometheus/latest/getting_started/)
- [Getting Started with Prometheus | Prometheus](https://prometheus.io/docs/tutorials/getting_started/)
- [Configuration | Prometheus](https://prometheus.io/docs/prometheus/latest/configuration/configuration/)

å¸Œæœ›è¿™äº›ä¿¡æ¯å¯¹æ‚¨æœ‰å¸®åŠ©ã€‚ğŸ‘


<hr/>

Question:

prometheus server æ¯æ¬¡æŠ“å–åˆ°çš„æ•°æ®å¹¶ä¸ä¸€å®šæ˜¯è¿‡å» 10 ç§’çš„æ•°æ®ï¼Œè€Œæ˜¯ç›®æ ‡åœ°å€åœ¨æŠ“å–æ—¶åˆ»æä¾›çš„æœ€æ–°æ•°æ®ã€‚è¯·ä»”ç»†æ€è€ƒä¸‹ï¼Œå¹¶ä¸¾ä¾‹è¯´æ˜ 

Answer:

å¥½çš„ï¼Œæˆ‘å¯ä»¥å°è¯•ç”¨ä¸€ä¸ªä¾‹å­æ¥è§£é‡Šè¿™ä¸ªé—®é¢˜ã€‚

å‡è®¾æ‚¨æœ‰ä¸€ä¸ªç›®æ ‡åœ°å€æ˜¯ http://example.com/metricsï¼Œå®ƒæä¾›äº†ä¸€ä¸ªæŒ‡æ ‡å«åš cpu_usageï¼Œè¡¨ç¤º CPU çš„ä½¿ç”¨ç‡ã€‚æ‚¨åœ¨ prometheus.yml æ–‡ä»¶ä¸­è®¾ç½®äº† scrape_interval: 10sï¼Œä¹Ÿå°±æ˜¯è¯´ prometheus server æ¯ 10 ç§’ä¼šä»è¿™ä¸ªåœ°å€æŠ“å–ä¸€æ¬¡æ•°æ®ã€‚

ç°åœ¨å‡è®¾åœ¨ 12:00:00 æ—¶åˆ»ï¼Œprometheus server ä» http://example.com/metrics æŠ“å–äº†ä¸€æ¬¡æ•°æ®ï¼Œå¾—åˆ°äº† cpu_usage çš„å€¼æ˜¯ 50%ã€‚è¿™ä¸ªå€¼å¹¶ä¸ä¸€å®šæ˜¯è¿‡å» 10 ç§’å†…çš„å¹³å‡å€¼ï¼Œè€Œæ˜¯ http://example.com/metrics åœ¨ 12:00:00 è¿™ä¸ªæ—¶åˆ»æä¾›çš„æœ€æ–°å€¼ã€‚ä¹Ÿè®¸ http://example.com/metrics æ˜¯æ¯ç§’æ›´æ–°ä¸€æ¬¡æ•°æ®ï¼Œä¹Ÿè®¸æ˜¯æ¯åˆ†é’Ÿæ›´æ–°ä¸€æ¬¡æ•°æ®ï¼Œä¹Ÿè®¸æ˜¯ä¸å®šæœŸæ›´æ–°æ•°æ®ã€‚prometheus server ä¸çŸ¥é“è¿™ä¸ªæ›´æ–°é¢‘ç‡ï¼Œå®ƒåªçŸ¥é“åœ¨ 12:00:00 è¿™ä¸ªæ—¶åˆ»ï¼Œå®ƒæŠ“å–åˆ°çš„æ•°æ®æ˜¯ 50%ã€‚

prometheus server ä¼šç»™è¿™ä¸ªæ•°æ®æ·»åŠ ä¸€ä¸ªæ—¶é—´æˆ³ï¼Œè¡¨ç¤ºæŠ“å–çš„æ—¶åˆ»ï¼Œä¹Ÿå°±æ˜¯ 12:00:00ã€‚è¿™ä¸ªæ—¶é—´æˆ³å’Œæ•°æ®çš„äº§ç”Ÿæ—¶åˆ»å¯èƒ½ä¸ä¸€è‡´ã€‚æ¯”å¦‚è¯´ï¼Œå¦‚æœ http://example.com/metrics æ˜¯æ¯åˆ†é’Ÿæ›´æ–°ä¸€æ¬¡æ•°æ®ï¼Œé‚£ä¹ˆå®ƒåœ¨ 12:00:00 è¿™ä¸ªæ—¶åˆ»æä¾›çš„æ•°æ®å¯èƒ½æ˜¯åœ¨ 11:59:30 è¿™ä¸ªæ—¶åˆ»äº§ç”Ÿçš„ã€‚æ‰€ä»¥ prometheus server æŠ“å–åˆ°çš„æ•°æ®å®é™…ä¸Šæ˜¯è¿‡å» 30 ç§’çš„æ•°æ®ï¼Œè€Œä¸æ˜¯è¿‡å» 10 ç§’çš„æ•°æ®ã€‚

åŒç†ï¼Œåœ¨ 12:00:10 è¿™ä¸ªæ—¶åˆ»ï¼Œprometheus server åˆä¼šä» http://example.com/metrics æŠ“å–ä¸€æ¬¡æ•°æ®ï¼Œå¾—åˆ°äº† cpu_usage çš„å€¼æ˜¯ 60%ã€‚è¿™ä¸ªå€¼ä¹Ÿæ˜¯ http://example.com/metrics åœ¨ 12:00:10 è¿™ä¸ªæ—¶åˆ»æä¾›çš„æœ€æ–°å€¼ï¼Œå¯èƒ½å’Œæ•°æ®çš„äº§ç”Ÿæ—¶åˆ»ä¸ä¸€è‡´ã€‚prometheus server ä¼šç»™è¿™ä¸ªæ•°æ®æ·»åŠ ä¸€ä¸ªæ—¶é—´æˆ³ï¼Œè¡¨ç¤ºæŠ“å–çš„æ—¶åˆ»ï¼Œä¹Ÿå°±æ˜¯ 12:00:10ã€‚

è¿™æ · prometheus server å°±ä¼šå¾—åˆ°ä¸€ä¸ªæ—¶é—´åºåˆ—çš„æ•°æ®ï¼Œå¦‚ä¸‹ï¼š

| æ—¶é—´æˆ³ | cpu_usage |
| :----: | :-------: |
| 12:00:00 |    50%    |
| 12:00:10 |    60%    |
| ...      |    ...    |

è¿™äº›æ—¶é—´æˆ³è¡¨ç¤º prometheus server æŠ“å–æ•°æ®çš„æ—¶åˆ»ï¼Œè€Œä¸æ˜¯æ•°æ®äº§ç”Ÿçš„æ—¶åˆ»ã€‚å¦‚æœæ‚¨æƒ³çŸ¥é“æ•°æ®äº§ç”Ÿçš„æ—¶åˆ»ï¼Œæ‚¨éœ€è¦äº†è§£ç›®æ ‡åœ°å€çš„æ›´æ–°é¢‘ç‡å’Œå»¶è¿Ÿæƒ…å†µã€‚

å¸Œæœ›è¿™ä¸ªä¾‹å­èƒ½å¤Ÿå¸®åŠ©æ‚¨ç†è§£ prometheus server çš„ scrape_interval å‚æ•°å’ŒæŠ“å–æ•°æ®çš„æœºåˆ¶ã€‚ğŸ˜Š


<hr/>

