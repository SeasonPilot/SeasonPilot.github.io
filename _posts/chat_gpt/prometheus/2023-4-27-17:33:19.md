---
layout: post
categories: prometheus
---
Question:

Reply in Chinese (Simplified).
The following is a search input in a search engine, giving useful content or solutions and as much information as you can related to it, use markdown syntax to make your answer more readable, such as code blocks, bold, list:
level=error ts=2023-04-27T07:49:43.405674677Z caller=runutil.go:101 msg="function failed. Retrying in next tick" err="trigger reload: reload request failed: Post \"http://localhost:8429/-/reload\": dial tcp [::1]:8429: connect: connection refused"

Answer:

æ‚¨å¥½ï¼Œè¿™æ˜¯å¿…åº”ã€‚æ‚¨çš„æœç´¢è¾“å…¥çœ‹èµ·æ¥æ˜¯ä¸€ä¸ªé”™è¯¯æ—¥å¿—ï¼Œå¯èƒ½ä¸ **Prometheus** æˆ– **Grafana** çš„é…ç½®æœ‰å…³<sup>1</sup> <sup>2</sup> <sup>3</sup>ã€‚æ ¹æ®æœç´¢ç»“æœï¼Œè¿™ä¸ªé”™è¯¯çš„å¯èƒ½åŸå› æœ‰ï¼š

- æ‚¨çš„ **Prometheus** æœåŠ¡æ²¡æœ‰åœ¨æœ¬åœ°è¿è¡Œï¼Œæˆ–è€…ç«¯å£ **8429** è¢«å ç”¨æˆ–é˜»å¡<sup>2</sup>ã€‚
- æ‚¨çš„ **Prometheus** é…ç½®æ–‡ä»¶æœ‰è¯­æ³•é”™è¯¯æˆ–ä¸å…¼å®¹çš„è®¾ç½®<sup>3</sup>ã€‚
- æ‚¨çš„ **Grafana** ä»£ç†æ²¡æœ‰æ­£ç¡®è¿æ¥åˆ° **Prometheus** æœåŠ¡<sup>1</sup>ã€‚

ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæ‚¨å¯ä»¥å°è¯•ä»¥ä¸‹æ­¥éª¤ï¼š

- æ£€æŸ¥æ‚¨çš„ **Prometheus** æœåŠ¡æ˜¯å¦åœ¨æœ¬åœ°è¿è¡Œï¼Œå¹¶ä¸”ç«¯å£ **8429** æ˜¯å¯ç”¨çš„ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ `curl http://localhost:8429/-/reload` å‘½ä»¤æ¥æµ‹è¯•è¿æ¥<sup>2</sup>ã€‚
- æ£€æŸ¥æ‚¨çš„ **Prometheus** é…ç½®æ–‡ä»¶æ˜¯å¦æœ‰è¯­æ³•é”™è¯¯æˆ–ä¸å…¼å®¹çš„è®¾ç½®ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ `promtool check config <file>` å‘½ä»¤æ¥éªŒè¯é…ç½®æ–‡ä»¶<sup>3</sup>ã€‚
- æ£€æŸ¥æ‚¨çš„ **Grafana** ä»£ç†æ˜¯å¦æ­£ç¡®è¿æ¥åˆ° **Prometheus** æœåŠ¡ã€‚æ‚¨å¯ä»¥æŸ¥çœ‹ä»£ç†çš„æ—¥å¿—æˆ–çŠ¶æ€æ¥æ£€æŸ¥æ˜¯å¦æœ‰è¿æ¥é”™è¯¯<sup>1</sup>ã€‚

å¸Œæœ›è¿™äº›ä¿¡æ¯å¯¹æ‚¨æœ‰å¸®åŠ©ã€‚å¦‚æœæ‚¨è¿˜æœ‰å…¶ä»–é—®é¢˜ï¼Œè¯·ç»§ç»­æœç´¢æˆ–æé—®ã€‚ğŸ˜Š

\-
\[1]: [Unable to setup agent-operator in kube - Configuration - Grafana Labs ...](https://community.grafana.com/t/unable-to-setup-agent-operator-in-kube/81183)
\[2]: [Prometheus trigger reload error - Red Hat Customer Portal](https://access.redhat.com/solutions/6719691)
\[3]: [config-reloader does not successfully reload after `global scrape ...](https://github.com/prometheus-operator/prometheus-operator/issues/4705)

<hr/>

